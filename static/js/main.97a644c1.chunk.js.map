{"version":3,"sources":["helpers/BootstrapScripts.js","panels/icons/influence.png","panels/icons/planet.png","panels/icons/resource.png","panels/icons/specialty-biotic.png","panels/icons/specialty-warfare.png","panels/icons/specialty-propulsion.png","panels/icons/specialty-cybernetic.png","panels/icons/trait-cultural.png","panels/icons/trait-hazardous.png","panels/icons/trait-industrial.png","panels/MoreInfo.js","panels/ExtraTiles.js","overview/MainOverview.js","map/MainMap.js","map/MapControls.js","options/OptionsControls.js","options/HelpModal.js","options/SetPlayerNameModal.js","options/SetRacesModal.js","options/MapOptions.js","App.js","helpers/Helpers.js","reportWebVitals.js","index.js"],"names":["BootstrapScripts","id","src","integrity","crossOrigin","React","Component","MoreInfo","props","getAdjacent","bind","tileNumber","adjacencies","adjacencyData","planets","resources","influence","specialties","traits","adjacentIndex","adjacentTileNumber","adjacentTile","this","tiles","planetIndex","tileData","all","planet","moreInfoByPlayer","adjacentInfo","playerName","currentPlayerNames","length","push","scope","className","Array","cultural","map","e","i","traitCultural","alt","hazardous","traitHazardous","industrial","traitIndustrial","biotic","specialtyBiotic","warfare","specialtyWarfare","propulsion","specialtyPropulsion","cybernetic","specialtyCybernetic","visible","resource","ExtraTiles","underlayStyle","width","height","position","top","left","tileStyle","display","margin","systemNumbers","concat","blue","red","useProphecyOfKings","pokBlue","pokRed","tileObjects","systemNumber","isNaN","Number","undefined","split","window","location","origin","pathname","draggable","onDragStart","drag","onDrop","drop","onDragOver","allowDrop","onDragEnter","dragEnter","onDragLeave","dragLeave","style","xmlns","viewBox","fill","points","MainOverview","transform","href","MainMap","mapTiles","boardData","pokSize","MapControls","place","effect","onClick","zoomPlus","zoomMinus","toggleOverlay","overlayVisible","data-tip","toggleExtraTiles","extraTilesVisible","toggleMoreInfo","moreInfoVisible","copyTilesToClipboard","toggleBackground","OptionsControls","type","isMobileView","toggleOptions","HelpModal","Modal","show","onHide","hideModal","Header","closeButton","Title","title","Body","dangerouslySetInnerHTML","__html","content","SetPlayerNameModal","x","htmlFor","name","placeholder","defaultValue","onChange","handleNameChange","SetRacesModal","visibleRaces","races","pokRaces","raceName","raceIndex","replace","checked","currentRaces","indexOf","handleRacesChange","MapOptions","startingValues","numberOfPlayers","pokNumberOfPlayers","boardStyles","2","Object","keys","styles","key","3","4","5","6","filter","boardStylesPok","7","8","pickStyles","raceData","homeworlds","pokHomeworlds","state","optionsPossible","currentNumberOfPlayers","currentNumberOfPlayersOptions","currentBoardStyleOptions","currentBoardStyle","currentPickStyle","currentSeed","userSetSeed","pickRaces","pickMultipleRaces","shuffleBoards","reversePlacementOrder","generated","pickRacesHelp","boardStyleHelp","pickStyleHelp","setPlayerNamesHelp","setRacesHelp","pickMultipleRacesHelp","shufflePriorityHelp","reversePlacementOrderHelp","resourceWeight","influenceWeight","planetCountWeight","specialtyWeight","anomalyWeight","wormholeWeight","shuffleThreshold","handleInputChange","updatePok","updatePlayerCount","updateBoardStyle","updateSeed","ensureAnomalies","ensureWormholesForType","updateBoardStyleOptions","generateBoard","togglePickRacesHelp","toggleBoardStyleHelp","togglePickStyleHelp","toggleSetPlayerNamesHelp","toggleSetRacesHelp","togglePickMultipleRacesHelp","toggleShufflePriorityHelp","toggleReversePlacementOrderHelp","event","target","value","setState","nameIndex","parseInt","substring","newPlayerNames","race","newCurrentRaces","indexToToggle","splice","boardOptions","toggleProphecyOfKings","newSeed","str","charAt","toUpperCase","slice","array","seed","t","m","Math","floor","random","sin","preventDefault","planetIndexesToPlace","getPlanetIndexesToPlace","possibleTiles","getPossiblePlanets","allAlphaWormholes","alphaWormholes","pokAlphaWormholes","allBetaWormholes","betaWormholes","pokBetaWormholes","newTiles","blankMap","shift","index","toString","hyperlaneData","shuffle","raceToHomeSystemMap","allTrueAnomalies","anomaly","pokAnomaly","anomalyTileNumber","adjacentTiles","adjacentAnomalies","swapped","blankReds","blankRed","pokBlankRed","possibleBlanks","blankRedTileNumber","swappable","alphaWormhole","alphaWormholeTileNumber","adjacentTileNumbers","adjacentWormhole","el","adjacentTilesNumbers","betaWormhole","betaWormholeTileNumber","updateTiles","planetWormholes","allWormholes","oppositeWormholes","allAnomalyList","unusedWormholes","usedWormholes","wormholeIndex","console","log","excludedTiles","reverseReplace","numPlanetsToPlace","blueTileRatio","redTileRatio","numAnomaliesLeftToBePlaced","possibleAnomalies","anomalyIndex","numTilesToReplace","replacementTiles","reverseBeforeAndAfter","reverse","currentTileIndex","tileOfInterest","primary","secondary","tertiary","possiblePlanets","weights","getWeightedPlanetList","planetWeights","planetTileNumber","getWeight","sort","a","b","currentIndex","currentHighValue","currentSetToShuffle","postPossiblePlanets","planetWeight","orderedPlanets","weightedPlanet","total_weight","tile","onSubmit","capitalize","App","isOptionsMenuShowing","overviewVisible","backgroundAnimated","zoom","mobileBreakpoint","drawMap","onPopState","checkResize","validateTiles","removeTrailing","toggleOptionsMenu","showExtraTiles","zoomPlusClick","zoomMinusClick","$mapContainer","$","$tiMap","onpopstate","onresize","innerWidth","document","documentElement","setProperty","URL","searchParams","get","history","pushState","newOptionsMenuState","pop","replaceAll","tileIndex","parsed","optionsSize","justTriggeredTiles","justTriggeredInfo","systemSelector","includes","hide","tileString","navigator","clipboard","writeText","css","mapVisible","mapControlsVisible","mapNumberTilesHeight","mapNumberTilesWidth","mapWidth","mapHeight","tileWidth","tileHeight","constraintWidth","min","constraintHeight","offsets","leftWidth","topHeight","halfWidth","ceil","halfHeight","treQuarWidth","calculateOffsets","currentPlayerNumber","numOverlay","underlay","attr","degrees","html","removeClass","addClass","scrollIntoView","behavior","block","inline","ev","targetSelector","targetUnderlay","dataTransfer","setData","fromId","getData","targetId","fromSelector","targetSource","targetType","fromType","targetSecond","fromSecond","tilesCopy","temp","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.97a644c1.chunk.js","sourcesContent":["import React from \"react\";\n\n/**\n * Scripts for bootstrap and jquery integration.\n */\nclass BootstrapScripts extends React.Component {\n    render() {\n        return (\n            <div id=\"bootstrapScripts\">\n                <script src=\"https://code.jquery.com/jquery-3.3.1.min.js\"\n                         integrity=\"sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=\"\n                         crossOrigin=\"anonymous\" />\n                <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\"\n                        integrity=\"sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1\"\n                        crossOrigin=\"anonymous\" />\n                <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\"\n                        integrity=\"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM\"\n                        crossOrigin=\"anonymous\" />\n            </div>\n        );\n    }\n}\nexport default BootstrapScripts;","export default __webpack_public_path__ + \"static/media/influence.d1f8e76f.png\";","export default __webpack_public_path__ + \"static/media/planet.7203e647.png\";","export default __webpack_public_path__ + \"static/media/resource.4e66e6d4.png\";","export default __webpack_public_path__ + \"static/media/specialty-biotic.683b8aa5.png\";","export default __webpack_public_path__ + \"static/media/specialty-warfare.222674a3.png\";","export default __webpack_public_path__ + \"static/media/specialty-propulsion.767d15a0.png\";","export default __webpack_public_path__ + \"static/media/specialty-cybernetic.16601911.png\";","export default __webpack_public_path__ + \"static/media/trait-cultural.800b2f56.png\";","export default __webpack_public_path__ + \"static/media/trait-hazardous.64956721.png\";","export default __webpack_public_path__ + \"static/media/trait-industrial.37a31434.png\";","import React from \"react\";\nimport adjacencyData from \"../data/adjacencyData.json\";\nimport tileData from \"../data/tileData.json\";\n\nimport influence from './icons/influence.png';\nimport planet from './icons/planet.png';\nimport resource from './icons/resource.png';\nimport specialtyBiotic from './icons/specialty-biotic.png';\nimport specialtyWarfare from './icons/specialty-warfare.png';\nimport specialtyPropulsion from './icons/specialty-propulsion.png';\nimport specialtyCybernetic from './icons/specialty-cybernetic.png';\nimport traitCultural from './icons/trait-cultural.png';\nimport traitHazardous from './icons/trait-hazardous.png';\nimport traitIndustrial from './icons/trait-industrial.png';\n\nclass MoreInfo extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.getAdjacent = this.getAdjacent.bind(this);\n    }\n\n    getAdjacent(tileNumber) {\n        // TODO rewrite this to calculate adjacencies, not reference them from a data file\n        let adjacencies = [...adjacencyData[tileNumber]];\n        // adjacencies.push(tileNumber);  // Add back in if we want to add the home system to these calcs\n\n        let planets = 0;\n        let resources = 0;\n        let influence = 0;\n        let specialties = {\n            \"biotic\": 0,\n            \"warfare\": 0,\n            \"propulsion\": 0,\n            \"cybernetic\": 0\n        };\n        let traits = {\n            \"cultural\": 0,\n            \"industrial\": 0,\n            \"hazardous\": 0\n        }\n\n        for (let adjacentIndex in adjacencies) {\n            let adjacentTileNumber = adjacencies[adjacentIndex]\n            let adjacentTile = this.props.tiles[adjacentTileNumber]\n            if (adjacentTile > 0) {\n                for (let planetIndex in tileData.all[adjacentTile][\"planets\"]) {\n                    let planet = tileData.all[adjacentTile][\"planets\"][planetIndex];\n                    planets += 1;\n                    resources += planet[\"resources\"];\n                    influence += planet[\"influence\"];\n                    specialties[planet[\"specialty\"]] += 1;\n                    traits[planet[\"trait\"]] += 1;\n                }\n            }\n        }\n        return {\n            \"planets\": planets,\n            \"resources\": resources,\n            \"influence\": influence,\n            \"specialties\": specialties,\n            \"traits\": traits,\n        }\n    }\n\n    render() {\n        let moreInfoByPlayer = [];\n\n        for (let tileNumber in this.props.tiles) {\n            if ((this.props.tiles[tileNumber] >= 0 && this.props.tiles[tileNumber] < 18) ||\n                (this.props.tiles[tileNumber] >= 51 && this.props.tiles[tileNumber] < 58)) {\n                // This is a homeworld, so gather its info\n                let adjacentInfo = this.getAdjacent(tileNumber);\n                let playerName = this.props.currentPlayerNames[moreInfoByPlayer.length];\n                if (playerName === \"\") {\n                    playerName = \"P\" + (moreInfoByPlayer.length + 1);\n                }\n                moreInfoByPlayer.push(\n                    <tr key={\"more-info-\" + playerName} >\n                        <th scope=\"row\">{playerName}</th>\n                        <td>{adjacentInfo.resources}</td>\n                        <td>{adjacentInfo.influence}</td>\n                        <td>\n                            <span className={\"d-flex\"}>\n                                {[...Array(adjacentInfo.traits.cultural)].map((e, i) => <img key={playerName + \"-cultural-\" + i} className={\"icon\"} src={traitCultural} alt={\"C\"}/>)}\n                                {[...Array(adjacentInfo.traits.hazardous)].map((e, i) => <img key={playerName + \"-hazardous-\" + i} className={\"icon\"} src={traitHazardous} alt={\"H\"}/>)}\n                                {[...Array(adjacentInfo.traits.industrial)].map((e, i) => <img key={playerName + \"-industrial-\" + i} className={\"icon\"} src={traitIndustrial} alt={\"I\"}/>)}\n                            </span>\n                        </td>\n                        <td>\n                            <span className={\"d-flex\"}>\n                                {[...Array(adjacentInfo.specialties.biotic)].map((e, i) => <img key={playerName + \"-biotic-\" + i} className={\"icon\"} src={specialtyBiotic} alt={\"B\"}/>)}\n                                {[...Array(adjacentInfo.specialties.warfare)].map((e, i) => <img key={playerName + \"-warfare-\" + i} className={\"icon\"} src={specialtyWarfare} alt={\"W\"}/>)}\n                                {[...Array(adjacentInfo.specialties.propulsion)].map((e, i) => <img key={playerName + \"-propulsion-\" + i} className={\"icon\"} src={specialtyPropulsion} alt={\"P\"}/>)}\n                                {[...Array(adjacentInfo.specialties.cybernetic)].map((e, i) => <img key={playerName + \"-cybernetic-\" + i} className={\"icon\"} src={specialtyCybernetic} alt={\"C\"}/>)}\n                            </span>\n                        </td>\n                    </tr>\n                );\n            }\n\n        }\n        return (\n            <div id=\"moreInfoContainer\" className={this.props.visible ? \"\" : \"d-none\"}>\n                <div className=\"title\">\n                    <h4 id=\"infoTitle\" className=\"text-center\">Assets Adjacent to Home System</h4>\n                </div>\n                <div id=\"moreInfo\" className=\"\">\n                    <table className=\"table\">\n                        <thead>\n                            <tr>\n                                <th scope=\"col\"></th>\n                                <th scope=\"col\"><img className={\"icon\"} src={resource} alt={\"Res.\"}/></th>\n                                <th scope=\"col\"><img className={\"icon\"} src={influence} alt={\"Inf.\"}/></th>\n                                <th scope=\"col\"><img className={\"icon\"} src={planet} alt={\"Planets\"}/></th>\n                                <th scope=\"col\"><img className={\"icon\"} src={specialtyWarfare} alt={\"Tech\"}/></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {moreInfoByPlayer}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        );\n    }\n}\nexport default MoreInfo;","import React from \"react\";\nimport tileData from \"../data/tileData.json\";\n\nclass ExtraTiles extends React.Component {\n    constructor(props) {\n        super(props);\n        this.underlayStyle = {\n            width: \"210px\",\n            height: \"185px\",\n            position: \"absolute\",\n            top: \"0\",\n            left: \"0\",\n        }\n        this.tileStyle = {\n            display: \"none\",\n            margin: \"5px\",\n            position: \"relative\",\n        }\n    }\n    \n    render() {\n        let systemNumbers = [];\n        systemNumbers = systemNumbers.concat(tileData.blue).concat(tileData.red);\n        if (this.props.useProphecyOfKings) {\n            systemNumbers = systemNumbers.concat(tileData.pokBlue).concat(tileData.pokRed);\n        }\n\n        const tileObjects = []\n        for (let systemNumber of systemNumbers) {\n\n            // Handle hyperlanes differently. Pull out their tile number, separate from their rotation angle\n            if (isNaN(Number(systemNumber)) && systemNumber !== undefined) {\n                systemNumber = systemNumber.split(\"-\")[0]\n            }\n\n            tileObjects.push(\n                <div key={\"extra-tile-wrapper-\" + systemNumber} className=\"tile-wrapper\">\n                    {/*<span id={\"num-\" + tileNumber} className={\"overlay\" + (this.props.overlayVisible ? \"\" : \" d-none\")}>{tileNumber}</span>*/}\n                    <img id={\"extra-\" + systemNumber}\n                         width=\"200px\"\n                         height=\"175px\"\n                         className=\"tile\"\n                         src={window.location.origin + window.location.pathname + \"/tiles/ST_\" + systemNumber + \".png\"}\n                         draggable=\"true\" onDragStart={this.props.drag} onDrop={this.props.drop}\n                         onDragOver={this.props.allowDrop} onDragEnter={this.props.dragEnter}\n                         onDragLeave={this.props.dragLeave}\n                         alt=\"\"\n                         style={this.tileStyle}\n                    />\n                    <svg id={\"extra-underlay-\" + systemNumber} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 359.35 311.21\" className=\"underlay\" fill=\"currentColor\"\n                         style={this.underlayStyle}>\n                        <polygon points=\"269.51 0 89.84 0 0 155.6 89.84 311.2 269.51 311.2 359.35 155.6 269.51 0\" />\n                    </svg>\n                </div>\n            )\n        }\n    \n        return (\n            <div id=\"extraTilesContainer\" className={this.props.visible ? \"\" : \"d-none\"}>\n                <div className=\"title\">\n                    <h4 id=\"extraTitle\" className=\"text-center\">Extra Tiles</h4>\n                </div>\n                <div id=\"extraTiles\" className=\"\">\n                    {tileObjects}\n                </div>\n            </div>\n        );\n    }\n}\nexport default ExtraTiles;","import React from \"react\";\nimport {ClipboardPlus} from \"react-bootstrap-icons\";\n\nclass MainOverview extends React.Component {\n    render() {\n        return (\n            <div id=\"overview\" className={\"flex-column justify-content-center\" + (this.props.visible ? \" d-flex\" : \" d-none\")}>\n                <div className=\"title\">\n                    <h1>TI4 Map Generator</h1>\n                </div>\n\n                <div className={\"overview-panel mb-4 mt-4 ml-auto mr-auto\"}>\n                    <h4 className={\"m-3\"}>Customize Your Next Twilight Imperium 4 Map!</h4>\n                    <div className={\"d-flex\"}>\n                        <p className={\"text-left p-3\"}>\n                            Use this tool to generate a fresh new Twilight Imperium map for the next game you play. The\n                            goal of this tool is to cut down the game setup time by letting you generate a fair and balanced map\n                            before you play, so that you are not spending a half-hour picking and placing tiles, or getting a bad draw of tiles. Get started\n                            by customizing settings via the generation panel on the right, and hit \"Generate\" to see a new\n                            map.\n                        </p>\n                    </div>\n                </div>\n\n                <div className={\"overview-panel mb-4 mt-4 ml-auto mr-auto\"}>\n                    <h4 className={\"m-3\"}>Drag and Drop for Further Customization</h4>\n                    <div className={\"d-flex\"}>\n                        <p className={\"text-left p-3\"}>\n                            Unhappy with a wormhole next to a home world? Are two asteroids next to one another? Don't like\n                            a certain system? Just swap it with another tile by clicking and dragging one tile over the top of\n                            another tile.\n                        </p>\n                    </div>\n                </div>\n\n                <div className={\"overview-panel mb-4 mt-4 ml-auto mr-auto\"}>\n                    <h4 className={\"m-3\"}>New Prophecy of Kings Expansion Content</h4>\n                    <div className={\"d-flex\"}>\n                        <p className={\"text-left p-3\"}>\n                            The new expansion content for TI4, called Prophecy of Kings, was recently released. Check out\n                            the new tiles as well as the 7 and 8 player maps. Hyperlanes which connect systems together\n                            were also added, and are included on some non expansion board styles.\n                        </p>\n                    </div>\n                </div>\n\n                <div className={\"overview-panel mb-4 mt-4 ml-auto mr-auto\"}>\n                    <h4 className={\"m-3\"}>Share With Your Friends</h4>\n                    <div className={\"d-flex\"}>\n                        <p className={\"text-left p-3\"}>\n                            After you have made your custom map, just copy the url and send it to your friends! Or, if\n                            you are using Table Top Simulator (TTS), press the \"Copy to Clipboard\" button (\n                            <ClipboardPlus className=\"icon d-inline\" />\n                             ) to get the full\n                            map string for the currently displayed map.\n                        </p>\n                    </div>\n                </div>\n\n                <div className={\"overview-panel mb-4 mt-4 ml-auto mr-auto\"}>\n                    <h4 className={\"m-3\"}>Use Any Tile You Want</h4>\n                    <div className={\"d-flex\"}>\n                        <p className={\"text-left p-3\"}>\n                            Do you really like the gravity rift anomaly and not see it on the board? Click the \"Show unused\n                            tiles\" button (\n                            <svg id=\"showExtraTilesSvg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 359.35 311.21\" className=\"icon d-inline\" fill=\"currentColor\">\n                                <polygon id=\"showExtraTilesPoly\" points=\"269.51 0 89.84 0 0 155.6 89.84 311.2 269.51 311.2 359.35 155.6 269.51 0\" />\n                            </svg>\n                            ) to see any tiles not currently being used in the map, and drag and drop them to add them!\n                        </p>\n                    </div>\n                </div>\n\n                <div className={\"overview-panel mb-4 mt-4 ml-auto mr-auto\"}>\n                    <h4 className={\"m-3\"}>Easy Setup On Game Day</h4>\n                    <div className={\"d-flex\"}>\n                        <p className={\"text-left p-3\"}>\n                            It can be hard to know which tile is which when it is time to setup your new board. Click the\n                            \"Toggle Tile Number Overlay\" (\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 194.78 169.62\" className=\"icon d-inline\" fill=\"currentColor\">\n                                <polygon className=\"overlay-cls-1\" points=\"148.03 4 51.81 4 4.61 86.92 52.02 169.84 148.03 169.84 195.03 86.92 148.03 4\"/>\n                                <text className=\"overlay-cls-2\" transform=\"translate(27.09 132.03)\">18</text>\n                            </svg>\n                            )\n                            button to see the numbers of every tile on your custom board.\n                        </p>\n                    </div>\n                </div>\n\n                <div className={\"overview-panel mb-4 mt-4 ml-auto mr-auto\"}>\n                    <h4 className={\"m-3\"}>Have Any Ideas On Improvements?</h4>\n                    <div className={\"d-flex\"}>\n                        <p className={\"text-left p-3\"}>\n                            I am always open to feedback and suggestions! You can see\n                            the <a href=\"https://github.com/KeeganW/ti4/issues\">current set of issues</a> with the generator, or if\n                            you don't see your issue or want to suggest a new feature, add\n                            it <a href=\"https://github.com/KeeganW/ti4/issues/new\">to my issue tracker</a>. Thanks for checking\n                            this out!\n                        </p>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default MainOverview;","import React from \"react\";\nimport boardData from \"../data/boardData.json\";\n\nclass MainMap extends React.Component {\n    render() {\n        const mapTiles = []\n\n        // Loop over 0 to pok board size, and add in the tile objects to be displayed\n        for (let tileNumber = 0; tileNumber < boardData.pokSize; tileNumber++) {\n            let systemNumber = this.props.tiles[tileNumber]\n\n            // Handle hyperlanes differently. Pull out their tile number, separate from their rotation angle\n            if (isNaN(Number(systemNumber)) && systemNumber !== undefined) {\n                systemNumber = this.props.tiles[tileNumber].split(\"-\")[0]\n            }\n\n            // Add the tile to the array of tiles to be displayed, if they are valid tiles\n            if (systemNumber !== -1 && systemNumber !== undefined) {\n                mapTiles.push(\n                    <div key={\"tile-wrapper-\" + tileNumber} className=\"tile-wrapper\">\n                        <span id={\"rotate-left-\" + tileNumber} className={\"d-none\"}></span>\n                        <span id={\"lock-\" + tileNumber} className={\"d-none\"}></span>\n                        <span id={\"rotate-right-\" + tileNumber} className={\"d-none\"}></span>\n                        <span id={\"number-\" + tileNumber} className={\"overlay\"}>{tileNumber}</span>\n                        <img id={\"tile-\" + tileNumber}\n                             className=\"tile\"\n                             src={window.location.origin + window.location.pathname + \"/tiles/ST_\" + systemNumber + \".png\"}\n                             draggable=\"true\" onDragStart={this.props.drag} onDrop={this.props.drop} onDragOver={this.props.allowDrop} onDragEnter={this.props.dragEnter} onDragLeave={this.props.dragLeave}\n                             alt={\"Twilight Imperium 4 Tile Number \" + tileNumber + \" and System Number \" + systemNumber + \".\"}\n                        />\n                        <svg id={\"underlay-\" + tileNumber} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 359.35 311.21\" className=\"underlay\" fill=\"currentColor\">\n                            <polygon points=\"269.51 0 89.84 0 0 155.6 89.84 311.2 269.51 311.2 359.35 155.6 269.51 0\" />\n                        </svg>\n                        <span id={\"exclude-\" + tileNumber} className={\"d-none\"}></span>\n                        <span id={\"swap-\" + tileNumber} className={\"d-none\"}></span>\n                        <span id={\"include-\" + tileNumber} className={\"d-none\"}></span>\n                    </div>\n                )\n            }\n        }\n        \n        return (\n            <div id=\"map\" className={\"map center-map \" + (this.props.visible ? \"\" : \"d-none\")}>\n                {mapTiles}\n            </div>\n        );\n    }\n}\nexport default MainMap;","import React from \"react\";\nimport {CardImage, ClipboardPlus, Dash, InfoCircle, Plus} from \"react-bootstrap-icons\";\nimport ReactTooltip from 'react-tooltip';\n\nclass MapControls extends React.Component {\n    \n    render() {\n        return (\n            <div id={\"map-controls\"}>\n                <ReactTooltip place={\"left\"} effect={\"solid\"}/>\n                <div id=\"zoomButtons\" className={\"btn-group-justified btn-group-sm btn-group-vertical\" + (this.props.visible ? \"\" : \" d-none\")}>\n                    <button className=\"btn btn-primary\" id=\"zoomPlus\" onClick={this.props.zoomPlus}>\n                        <Plus className=\"icon\" />\n                    </button>\n                    <button className=\"btn btn-primary\" id=\"zoomMinus\" onClick={this.props.zoomMinus}>\n                        <Dash className=\"icon\" />\n                    </button>\n                </div>\n    \n                <div id=\"hexOverlay\" className={\"btn-group-justified btn-group-sm\" + (this.props.visible ? \"\" : \" d-none\")} onClick={this.props.toggleOverlay}>\n                    <button className={\"btn btn-primary\" + (this.props.overlayVisible ? \" active\": \"\")} id=\"showHexOverlay\" data-tip=\"Tile Number Overlay\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 194.78 169.62\" className=\"icon\" fill=\"currentColor\">\n                            <polygon className=\"overlay-cls-1\" points=\"148.03 4 51.81 4 4.61 86.92 52.02 169.84 148.03 169.84 195.03 86.92 148.03 4\"/>\n                            <text className=\"overlay-cls-2\" transform=\"translate(27.09 132.03)\">18</text>\n                        </svg>\n                    </button>\n                </div>\n    \n                <div id=\"extraTilesButton\" className={\"btn-group-justified btn-group-sm\" + (this.props.visible ? \"\" : \" d-none\")} onClick={this.props.toggleExtraTiles}>\n                    <button className={\"btn btn-primary\" + (this.props.extraTilesVisible ? \" active\": \"\")} id=\"showExtraTiles\" data-tip=\"Unused Tiles\" >\n                        <svg id=\"showExtraTilesSvg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 359.35 311.21\" className=\"icon\" fill=\"currentColor\">\n                            <polygon id=\"showExtraTilesPoly\" points=\"269.51 0 89.84 0 0 155.6 89.84 311.2 269.51 311.2 359.35 155.6 269.51 0\" />\n                        </svg>\n                    </button>\n                </div>\n\n                <div id=\"moreInfoButton\" className={\"btn-group-justified btn-group-sm\" + (this.props.visible ? \"\" : \" d-none\")} onClick={this.props.toggleMoreInfo}>\n                    <button className={\"btn btn-primary\" + (this.props.moreInfoVisible ? \" active\": \"\")} id=\"showMoreInfo\" data-tip=\"Assets Adjacent to Home\">\n                        <InfoCircle id=\"showMoreInfoSvg\" className=\"icon\" />\n                    </button>\n                </div>\n\n                <div id=\"copyTileStringButton\" className={\"btn-group-justified btn-group-sm\" + (this.props.visible ? \"\" : \" d-none\")} onClick={this.props.copyTilesToClipboard}>\n                    <button className={\"btn btn-primary\"} id=\"copyTileStringInfo\" data-tip=\"Copy TTS Tile String to Clipboard\">\n                        <ClipboardPlus id=\"copyTileStringSvg\" className=\"icon\" />\n                    </button>\n                </div>\n\n\n\n                <div id=\"toggleBackgroundButton\" className={\"btn-group-justified btn-group-sm\"} onClick={this.props.toggleBackground}>\n                    <button className={\"btn btn-primary\"} id=\"toggleBackground\" data-tip=\"Toggle Background Animation\">\n                        <CardImage id=\"toggleBackgroundSvg\" className=\"icon\" />\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\nexport default MapControls;","import React from \"react\";\nimport {ArrowBarLeft, ArrowBarRight} from \"react-bootstrap-icons\";\n\nclass OptionsControls extends React.Component {\n    render() {\n        return (\n            <div className=\"controls btn-group-justified btn-group-sm\">\n                <button type=\"button\" id=\"toggleOptions\" className={\"btn btn-primary\" + (this.props.visible ? \"\" : \" hidden\") + (this.props.isMobileView ? \" full-screen\" : \"\")} onClick={this.props.toggleOptions}>\n                    <ArrowBarRight className={\"icon icon-contract\"} />\n                    <ArrowBarLeft className={\"icon icon-expand\"} />\n                </button>\n            </div>\n        );\n    }\n}\nexport default OptionsControls;","import React from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\n\nclass HelpModal extends React.Component {\n    render() {\n        return (\n            <Modal show={this.props.visible} onHide={this.props.hideModal}>\n                <Modal.Header closeButton>\n                    <Modal.Title>{this.props.title}</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <div dangerouslySetInnerHTML={{__html: this.props.content}} />\n                </Modal.Body>\n            </Modal>\n        );\n    }\n}\nexport default HelpModal;","import React from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\n\nclass SetPlayerNameModal extends React.Component {\n    render() {\n        return (\n            <Modal show={this.props.visible} onHide={this.props.hideModal}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Set Player Names</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <form id={\"playerNameForm\"}>\n                        {this.props.currentPlayerNames.map((x, i) => {\n                            return (\n                                <div className={\"form-group\"} key={\"set-names-\" + i}>\n                                    <label htmlFor={\"player\" + (i+1) + \"Name\"}>Player {(i+1)}</label>\n                                    <input className={\"form-control\"} name={\"playerName\" + i} type={\"text\"} placeholder={\"P\" + (i+1)} defaultValue={x} onChange={this.props.handleNameChange} />\n                                </div>\n                            )\n                        })}\n                    </form>\n\n\n                </Modal.Body>\n            </Modal>\n        );\n    }\n}\nexport default SetPlayerNameModal;","import React from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\n\nclass SetRacesModal extends React.Component {\n    render() {\n        let visibleRaces = this.props.races\n        if (this.props.useProphecyOfKings) {\n            visibleRaces = visibleRaces.concat(this.props.pokRaces)\n        }\n\n        return (\n            <Modal show={this.props.visible} onHide={this.props.hideModal}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Set Races</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    {/*{this.props.races}*/}\n                    {/*{this.props.pokRaces}*/}\n                    {/*{this.props.useProphecyOfKings}*/}\n                    {/*{this.props.currentRaces}*/}\n                    {/*{this.props.handleRacesChange}*/}\n                    <form id={\"includedRacesForm\"}>\n                        {/*<div className={\"form-group\"}>*/}\n                        {/*    <input className={\"form-control\"} id={\"filterRaces\"} type={\"text\"} placeholder={\"filterRaces\"} />*/}\n                        {/*</div>*/}\n                        {visibleRaces.map((raceName, raceIndex) => {\n                            return (\n                                <div className={\"custom-control custom-checkbox mb-3 races\"} key={\"set-races-\" + raceIndex}>\n                                    <input className={\"custom-control-input\"} name={raceName} type={\"checkbox\"} id={\"include\" + raceName.replace(\" \", \"\")} checked={this.props.currentRaces.indexOf(raceName) > -1} onChange={this.props.handleRacesChange} />\n                                    <label className={\"custom-control-label d-flex\"} htmlFor={\"include\" + raceName.replace(\" \", \"\")}>{raceName}</label>\n                                </div>\n                            )\n                        })}\n                    </form>\n\n\n                </Modal.Body>\n            </Modal>\n        );\n    }\n}\nexport default SetRacesModal;","import React from \"react\";\nimport {QuestionCircle} from \"react-bootstrap-icons\";\nimport boardData from \"../data/boardData.json\";\nimport tileData from \"../data/tileData.json\";\nimport raceData from \"../data/raceData.json\";\nimport adjacencyData from \"../data/adjacencyData.json\";\nimport HelpModal from \"./HelpModal\";\nimport SetPlayerNameModal from \"./SetPlayerNameModal\";\nimport SetRacesModal from \"./SetRacesModal\";\n\n\nclass MapOptions extends React.Component {\n    constructor(props) {\n        super(props);\n        const startingValues = {\n            numberOfPlayers: [2, 3, 4, 5, 6],\n            pokNumberOfPlayers: [7, 8],\n            boardStyles: {\n                2: Object.keys(boardData.styles[\"2\"]).map((key) => key),\n                3: Object.keys(boardData.styles[\"3\"]).map((key) => key),\n                4: Object.keys(boardData.styles[\"4\"]).map((key) => key),\n                5: Object.keys(boardData.styles[\"5\"]).map((key) => key),\n                6: Object.keys(boardData.styles[\"6\"]).map((key) => key === \"large\" ? null : key).filter(x => x),\n            },\n            boardStylesPok: {\n                2: Object.keys(boardData.styles[\"2\"]).map((key) => key),\n                3: Object.keys(boardData.styles[\"3\"]).map((key) => key),\n                4: Object.keys(boardData.styles[\"4\"]).map((key) => key),\n                5: Object.keys(boardData.styles[\"5\"]).map((key) => key),\n                6: Object.keys(boardData.styles[\"6\"]).map((key) => key),\n                7: Object.keys(boardData.styles[\"7\"]).map((key) => key),\n                8: Object.keys(boardData.styles[\"8\"]).map((key) => key),\n            },\n            pickStyles: [\"balanced\", \"random\", \"resource\", \"influence\", \"custom\"],\n            races: [...raceData[\"races\"]],\n            pokRaces: [...raceData[\"pokRaces\"]],\n            homeworlds: raceData[\"homeSystems\"],\n            pokHomeworlds: raceData[\"pokHomeSystems\"]\n        }\n        const startingPlayers = 6;\n\n        this.state = {\n            optionsPossible: startingValues,\n            currentNumberOfPlayers: startingPlayers,\n            currentNumberOfPlayersOptions: startingValues[\"numberOfPlayers\"],\n            currentBoardStyleOptions: startingValues[\"boardStyles\"][startingPlayers],\n            currentBoardStyle: startingValues[\"boardStyles\"][startingPlayers][0],\n            currentPickStyle: startingValues[\"pickStyles\"][0],\n            currentSeed: \"\",\n            userSetSeed: false,\n            pickRaces: false,\n            pickMultipleRaces: false,\n            shuffleBoards: true,\n            reversePlacementOrder: false,\n            generated: false,\n\n            pickRacesHelp: false,\n            boardStyleHelp: false,\n            pickStyleHelp: false,\n            setPlayerNamesHelp: false,\n            setRacesHelp: false,\n            pickMultipleRacesHelp: false,\n            shufflePriorityHelp: false,\n            reversePlacementOrderHelp: false,\n\n            resourceWeight: 70,\n            influenceWeight: 30,\n            planetCountWeight: 15,\n            specialtyWeight: 50,\n            anomalyWeight: 10,\n            wormholeWeight: 25,\n\n            shuffleThreshold: 5,\n        };\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleNameChange = this.handleNameChange.bind(this);\n        this.handleRacesChange = this.handleRacesChange.bind(this);\n        this.updatePok = this.updatePok.bind(this);\n        this.updatePlayerCount = this.updatePlayerCount.bind(this);\n        this.updateBoardStyle = this.updateBoardStyle.bind(this);\n        this.updateSeed = this.updateSeed.bind(this);\n\n        this.ensureAnomalies = this.ensureAnomalies.bind(this);\n        this.ensureWormholesForType = this.ensureWormholesForType.bind(this);\n\n        this.updateBoardStyleOptions = this.updateBoardStyleOptions.bind(this); // TODO is the bind needed?\n\n        this.generateBoard = this.generateBoard.bind(this);\n\n        this.togglePickRacesHelp = this.togglePickRacesHelp.bind(this);\n        this.toggleBoardStyleHelp = this.toggleBoardStyleHelp.bind(this);\n        this.togglePickStyleHelp = this.togglePickStyleHelp.bind(this);\n        this.toggleSetPlayerNamesHelp = this.toggleSetPlayerNamesHelp.bind(this);\n        this.toggleSetRacesHelp = this.toggleSetRacesHelp.bind(this);\n        this.togglePickMultipleRacesHelp = this.togglePickMultipleRacesHelp.bind(this);\n        this.toggleShufflePriorityHelp = this.toggleShufflePriorityHelp.bind(this);\n        this.toggleReversePlacementOrderHelp = this.toggleReversePlacementOrderHelp.bind(this);\n    }\n\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value\n        });\n    }\n\n    handleNameChange(event) {\n        let nameIndex = parseInt(event.target.name.substring(10))\n        let newPlayerNames = this.props.currentPlayerNames\n        newPlayerNames[nameIndex] = event.target.value\n\n        this.setState({\n            currentPlayerNames: newPlayerNames\n        })\n    }\n\n    handleRacesChange(event) {\n        let race = event.target.name;\n        let newCurrentRaces = this.props.currentRaces;\n        let indexToToggle = newCurrentRaces.indexOf(race)\n        if (indexToToggle >= 0) {\n            newCurrentRaces.splice(indexToToggle, 1)\n        } else {\n            newCurrentRaces.push(race)\n        }\n\n        this.setState({\n            currentRaces: newCurrentRaces\n        })\n    }\n\n    updatePok(event) {\n        let boardOptions = this.state.optionsPossible.boardStyles;\n        if (event.target.checked) {\n            boardOptions = this.state.optionsPossible.boardStylesPok;\n            this.setState({\n                currentNumberOfPlayersOptions: this.state.optionsPossible.numberOfPlayers.concat(this.state.optionsPossible.pokNumberOfPlayers),\n                currentRaces: [...this.state.optionsPossible.races].concat([...this.state.optionsPossible.pokRaces]),\n                currentBoardStyle: boardOptions[this.state.currentNumberOfPlayers][0],\n                currentBoardStyleOptions: boardOptions[this.state.currentNumberOfPlayers],\n            }, this.props.toggleProphecyOfKings(event));\n        } else {\n            this.setState({\n                currentNumberOfPlayers: this.state.currentNumberOfPlayers > 6 ? 6 : this.state.currentNumberOfPlayers,\n                currentNumberOfPlayersOptions: this.state.optionsPossible.numberOfPlayers,\n                currentBoardStyle: this.state.currentNumberOfPlayers > 6 ? boardOptions[\"6\"][0] : this.state.currentBoardStyle,\n                currentBoardStyleOptions: this.state.currentNumberOfPlayers > 6 ? boardOptions[\"6\"] : boardOptions[this.state.currentNumberOfPlayers],\n                currentRaces: [...this.state.optionsPossible.races],\n            }, this.props.toggleProphecyOfKings(event));\n        }\n    }\n\n    updatePlayerCount(event) {\n        this.setState({\n            currentNumberOfPlayers: parseInt(event.target.value),\n        }, () => {\n            this.updateBoardStyleOptions(event)\n        });\n    }\n\n    updateBoardStyle(event) {\n        this.setState({\n            currentBoardStyle: event.target.value,\n        }, () => {\n            if (this.state.generated) {\n                this.generateBoard(event)\n            }\n        });\n    }\n\n    updateBoardStyleOptions(event) {\n        let boardOptions = this.state.optionsPossible.boardStyles;\n        if (this.props.useProphecyOfKings) {\n            boardOptions = this.state.optionsPossible.boardStylesPok;\n        }\n        this.setState({\n            currentBoardStyleOptions: boardOptions[this.state.currentNumberOfPlayers],\n            currentBoardStyle: boardOptions[this.state.currentNumberOfPlayers][0],\n        }, () => {\n            if (this.state.generated) {\n                this.generateBoard(event)\n            }\n        });\n    }\n\n    updateSeed(event) {\n        let newSeed = parseInt(event.target.value)\n        if (!isNaN(newSeed) || event.target.value === \"\") {\n            this.setState({\n                currentSeed: event.target.value,\n                userSetSeed: event.target.value !== \"\"  // Ignore user entry if the value is blank\n            });\n        }\n    }\n\n    capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    }\n\n    shuffle(array, seed) {\n        var m = array.length, t, i;\n\n        // While there remain elements to shuffle\n        while (m) {\n\n            // Pick a remaining element\n            i = Math.floor(this.random(seed) * m--);\n\n            // And swap it with the current element.\n            t = array[m];\n            array[m] = array[i];\n            array[i] = t;\n            ++seed\n        }\n\n        return array;\n    }\n\n    random(seed) {\n        var x = Math.sin(seed++) * 10000;\n        return x - Math.floor(x);\n    }\n\n    generateBoard(e) {\n        // Don't actually submit the form\n        e.preventDefault();\n\n        // Create a random seed to use unless the user has specified one\n        let currentSeed = this.state.currentSeed\n        if (!this.state.userSetSeed) {\n            currentSeed = Math.floor(Math.random() * Math.floor(9999));\n        }\n\n        // Get a list of board spaces that need to have non-homeworld planets assigned to them\n        let planetIndexesToPlace = this.getPlanetIndexesToPlace(currentSeed)\n\n        // Get an ordered list of planets to use to fill board with\n        let possibleTiles = this.getPossiblePlanets()\n\n        // Check that we will have enough anomalies in our placed planets, if not, then reverse replace until there are enough anomalies\n        possibleTiles = this.ensureAnomalies(possibleTiles, planetIndexesToPlace.length)\n\n        // Ensure that if we have an alpha wormhole, then we have at least two of them\n        const allAlphaWormholes = this.props.useProphecyOfKings ? [...tileData.alphaWormholes.concat(tileData.pokAlphaWormholes)] : [...tileData.alphaWormholes];\n        const allBetaWormholes = this.props.useProphecyOfKings ? [...tileData.betaWormholes.concat(tileData.pokBetaWormholes)] : [...tileData.betaWormholes];\n\n        possibleTiles = this.ensureWormholesForType(possibleTiles, [26], allAlphaWormholes, allBetaWormholes);\n\n        // Ensure that if we have an alpha wormhole, then we have at least two of them\n        possibleTiles = this.ensureWormholesForType(possibleTiles, [25, 64], allBetaWormholes, allAlphaWormholes);\n\n        let newTiles = [...boardData.blankMap]\n\n        // Place planets one at a time, using the indexes to place combined with the ordered planet list\n        for (let planetIndex in planetIndexesToPlace) {\n            newTiles[planetIndexesToPlace[planetIndex]] = possibleTiles.shift();\n        }\n\n        // Place hyperlanes in their specific layout and orientation\n        // TODO in the future, can this be random? Can they rotate?\n        for (let index = 0; index < boardData.styles[this.state.currentNumberOfPlayers.toString()][this.state.currentBoardStyle]['hyperlane_tiles'].length; index++) {\n            let hyperlaneData = boardData.styles[this.state.currentNumberOfPlayers.toString()][this.state.currentBoardStyle]['hyperlane_tiles'][index]\n            newTiles[hyperlaneData[0]] = hyperlaneData[1] + \"-\" + hyperlaneData[2]\n        }\n\n        // Get current races for placing races, and shuffle them around\n        let currentRaces = [...this.props.currentRaces]\n        currentRaces = this.shuffle(currentRaces, currentSeed)\n\n        // Place data for the homeSystems from board data\n        for (let index = 0; index < boardData.styles[this.state.currentNumberOfPlayers.toString()][this.state.currentBoardStyle]['home_worlds'].length; index++) {\n            let planetIndex = boardData.styles[this.state.currentNumberOfPlayers.toString()][this.state.currentBoardStyle]['home_worlds'][index]\n            if (this.state.pickRaces && !this.state.pickMultipleRaces) {\n                // Convert races into race hexes and assign a random race to a player\n                newTiles[planetIndex] = raceData.raceToHomeSystemMap[currentRaces[0]]\n                currentRaces.shift();\n            } else {\n                // Set home worlds to 0, races to be decided later\n                newTiles[planetIndex] = 0\n            }\n        }\n\n        // Put Mecatol Rex in the middle\n        newTiles[0] = 18\n\n        // Planets have been placed, time to do post processing checks to make sure things are good to go.\n        // Get all anomalies that are adjacent to one another\n        let allTrueAnomalies = this.props.useProphecyOfKings ? [...tileData.anomaly.concat(tileData.pokAnomaly)] : [...tileData.anomaly];\n        for (let anomaly of allTrueAnomalies) {\n            let anomalyTileNumber = newTiles.indexOf(anomaly);\n            if (anomalyTileNumber >= 0) {\n                // anomaly exists in the map, so check it\n                let adjacentTiles = adjacencyData[anomalyTileNumber];\n                let adjacentAnomalies = [];\n\n                // Get a list of all adjacent anomalies to this one\n                for (let adjacentTileNumber of adjacentTiles) {\n                    let adjacentTile = newTiles[adjacentTileNumber];\n                    if (allTrueAnomalies.indexOf(adjacentTile) >= 0) {\n                        // This tile is an anomaly\n                        adjacentAnomalies.push(adjacentTile)\n                    }\n                }\n\n                // If tile is in conflict more than 1 anomaly, see if there is a \"blank\" anomaly off the board to swap with. if not, then continue\n                let swapped = false;\n                let blankReds = this.props.useProphecyOfKings ? [...tileData.blankRed.concat(tileData.pokBlankRed)] : [...tileData.blankRed];\n                if (adjacentAnomalies.length > 1) {\n                    let possibleBlanks = [];\n                    for (let blankRed of blankReds) {\n                        if (newTiles.indexOf(blankRed) < 0) {\n                            possibleBlanks.push(blankRed)\n                        }\n                    }\n                    possibleBlanks = this.shuffle(possibleBlanks, this.state.currentSeed);\n                    if (possibleBlanks.length > 0) {\n                        swapped = true;\n                        newTiles[anomalyTileNumber] = possibleBlanks[0];\n                    }\n                }\n\n                if (!swapped && adjacentAnomalies.length > 0) {\n                    // Look at all red back tiles on the board that are not anomalies, and see if they have adjacent anomalies\n                    // Test this code with 2 player, everything else base, seed of 9986\n                    for (let blankRed of blankReds) {\n                        let blankRedTileNumber = newTiles.indexOf(blankRed)\n                        if (blankRedTileNumber >= 0) {\n                            let adjacentTiles = adjacencyData[blankRedTileNumber];\n                            let swappable = true;\n                            for (let adjacentTile of adjacentTiles) {\n                                if (allTrueAnomalies.indexOf(newTiles[adjacentTile]) >= 0 && adjacentTile !== anomalyTileNumber) {\n                                    // This blank has an adjacent anomaly, so throw it out\n                                    swappable = false;\n                                    break;\n                                }\n                            }\n                            if (swappable) {\n                                // This blank red has no other adjacent anomalies, so swap\n                                newTiles[anomalyTileNumber] = blankRed;\n                                newTiles[blankRedTileNumber] = anomaly;\n                                swapped = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (!swapped) {\n                        /*\n                        There is a potential use for this strategy, but for now it seems pretty safe to just let it fail\n                        to swap on a blank. It is rare that it is impossible, and even when it is, its a pretty simple\n                        rule. Plus the rules let you place reds next to each other if moving them is impossible.\n                        btw, not sure this code below works properly. I believe there is a bug in it.\n                         */\n\n                        /*\n                        // Going in reverse, find the first tile with no anomalies adjacent, and swap\n                        newTiles.reverse()\n                        for (let tile of newTiles) {\n                            if (tile !== 0 && tile !== -1 && allTrueAnomalies.indexOf(tile) < 0 && blankReds.indexOf(tile) < 0) {\n                                console.log(\"Tile: \" + tile)\n                                // This is a real tile, check for adjacency to other anomalies\n                                let blankRedTileNumber = newTiles.indexOf(tile)\n                                let adjacentTiles = adjacencyData[blankRedTileNumber];\n                                let swappable = true;\n                                for (let adjacentTile of adjacentTiles) {\n                                    if (allTrueAnomalies.indexOf(newTiles[adjacentTile]) >= 0) {\n                                        // This blank has an adjacent anomaly, so throw it out\n                                        swappable = false;\n                                        break;\n                                    }\n                                }\n                                if (swappable) {\n                                    // No adjacency breaks found, go ahead and swap it\n                                    console.log(anomalyTileNumber)\n                                    console.log(blankRedTileNumber)\n                                    newTiles[anomalyTileNumber] = tile;\n                                    newTiles[blankRedTileNumber] = anomaly;\n                                    swapped = true;\n                                    break;\n                                }\n                            }\n                        }\n                        // If no swap possible, no problem. Continue on\n                        newTiles.reverse()\n                        */\n                    }\n                }\n            }\n        }\n\n        // Alpha, at least one wormhole is a \"empty tile\" so swap it with a blank tile\n        for (let alphaWormhole of allAlphaWormholes) {\n            let alphaWormholeTileNumber = newTiles.indexOf(alphaWormhole);\n            if (alphaWormholeTileNumber >= 0 && tileData.all[alphaWormhole].planets.length === 0) {\n                // Wormhole exists on the board, and is blank. Check if it is adjacent to another wormhole\n                let adjacentTileNumbers = adjacencyData[alphaWormholeTileNumber];\n                let adjacentWormhole = false;\n                for (let adjacentTileNumber of adjacentTileNumbers) {\n                    if (allAlphaWormholes.indexOf(newTiles[adjacentTileNumber]) >= 0) {\n                        adjacentWormhole = true;\n                        break;\n                    }\n                }\n                if (adjacentWormhole) {\n                    // This blank has an adjacent wormhole, so we need to move it. Loop over all blanks to swap with\n                    let blankReds = this.props.useProphecyOfKings ? [...tileData.blankRed.concat(tileData.pokBlankRed)] : [...tileData.blankRed];\n                    // Remove wormholes from blank reds, because swapping alphas doesn't make sense.\n                    blankReds = blankReds.filter( function( el ) {\n                        return allAlphaWormholes.indexOf( el ) < 0;\n                    } );\n                    blankReds = this.shuffle(blankReds, this.state.currentSeed);\n                    for (let blankRed of blankReds) {\n                        let blankRedTileNumber = newTiles.indexOf(blankRed)\n                        if (blankRedTileNumber >= 0) {\n                            let adjacentTilesNumbers = adjacencyData[blankRedTileNumber];\n                            let swappable = true;\n                            for (let adjacentTileNumber of adjacentTilesNumbers) {\n                                if ((allAlphaWormholes.indexOf(newTiles[adjacentTileNumber]) >= 0 && adjacentTileNumber !== alphaWormholeTileNumber) || (allTrueAnomalies.indexOf(alphaWormhole) >= 0 && allTrueAnomalies.indexOf(newTiles[adjacentTileNumber]) >= 0)) {\n                                    // This blank has an adjacent anomaly, so throw it out\n                                    swappable = false;\n                                    break;\n                                }\n                            }\n                            if (swappable) {\n                                // This blank red has no other adjacent anomalies, so swap\n                                newTiles[alphaWormholeTileNumber] = blankRed;\n                                newTiles[blankRedTileNumber] = alphaWormhole;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        // Beta at least one planet wormhole, so swap it with another planet of equal resource value\n        for (let betaWormhole of allBetaWormholes) {\n            let betaWormholeTileNumber = newTiles.indexOf(betaWormhole);\n            if (betaWormholeTileNumber >= 0 && tileData.all[betaWormhole].planets.length === 0) {\n                // Wormhole exists on the board, and is blank. Check if it is adjacent to another wormhole\n                let adjacentTileNumbers = adjacencyData[betaWormholeTileNumber];\n                let adjacentWormhole = false;\n                for (let adjacentTileNumber of adjacentTileNumbers) {\n                    if (allBetaWormholes.indexOf(newTiles[adjacentTileNumber]) >= 0) {\n                        adjacentWormhole = true;\n                        break;\n                    }\n                }\n                if (adjacentWormhole) {\n                    // This blank has an adjacent wormhole, so we need to move it. Loop over all blanks to swap with\n                    let blankReds = this.props.useProphecyOfKings ? [...tileData.blue.concat(tileData.pokBlue)] : [...tileData.blue];\n                    // Remove wormholes from blank reds, because swapping alphas doesn't make sense.\n                    blankReds = blankReds.filter( function( el ) {\n                        return allBetaWormholes.indexOf( el ) < 0;\n                    } );\n                    blankReds = this.shuffle(blankReds, this.state.currentSeed);\n                    for (let blankRed of blankReds) {\n                        let blankRedTileNumber = newTiles.indexOf(blankRed)\n                        if (blankRedTileNumber >= 0) {\n                            let adjacentTilesNumbers = adjacencyData[blankRedTileNumber];\n                            let swappable = true;\n                            for (let adjacentTileNumber of adjacentTilesNumbers) {\n                                // Check for adjacency to another wormhole (excluding itself) and other anomalies\n                                if ((allBetaWormholes.indexOf(newTiles[adjacentTileNumber]) >= 0 && adjacentTileNumber !== betaWormholeTileNumber)) {\n                                    //\n                                    swappable = false;\n                                    break;\n                                }\n                            }\n                            if (swappable) {\n                                // This blank red has no other adjacent anomalies, so swap\n                                newTiles[betaWormholeTileNumber] = blankRed;\n                                newTiles[blankRedTileNumber] = betaWormhole;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        // Update the seed we are using (so it is displayed) and then update the tiles\n        this.setState({\n            currentSeed: currentSeed,\n            generated: true\n        }, this.props.updateTiles(newTiles));\n    }\n\n    ensureWormholesForType(possibleTiles, planetWormholes, allWormholes, oppositeWormholes) {\n        let allAnomalyList = this.props.useProphecyOfKings ? [...tileData.anomaly.concat(tileData.pokAnomaly)] : [...tileData.anomaly];\n        let unusedWormholes = [];\n        let usedWormholes = [];\n\n        // Get an array of all unused wormholes\n        for (let wormholeIndex in allWormholes) {\n            possibleTiles.indexOf(allWormholes[wormholeIndex]) < 0 ?\n                unusedWormholes.push(allWormholes[wormholeIndex]) : usedWormholes.push(allWormholes[wormholeIndex]);\n        }\n\n        // If there is only one wormhole, then we need to add a new one in\n        if (usedWormholes.length === 1) {\n            console.log(\"Error! Only one wormhole!\")\n            /*\n            Lets do some tricky logic here. If we are using a planet wormhole tile, then we want to replace\n            another anomaly with one of the other one (pok: two) anomaly wormholes. If we are not using the planet tile,\n            then we can try to find a planet to replace with any remaining wormhole tiles.\n             */\n            unusedWormholes = this.shuffle(unusedWormholes, this.state.currentSeed);\n            let excludedTiles = [...allWormholes.concat(oppositeWormholes)];\n\n            // Check that the single used wormhole is not a planet. If not, try to replace some other planet with a planet wormhole\n            if (planetWormholes.indexOf(usedWormholes[0]) < 0) {\n                unusedWormholes = planetWormholes;\n                excludedTiles = excludedTiles.concat(allAnomalyList);\n            } // else { // Using a planet, so try to replace the lowest weight tiles with any wormhole tile }\n            possibleTiles = this.reverseReplace(possibleTiles, 1, unusedWormholes, excludedTiles, false);\n        }\n\n        return possibleTiles;\n    }\n\n    ensureAnomalies(possibleTiles, numPlanetsToPlace) {\n        // Only care about the tiles we will actually place\n        possibleTiles = possibleTiles.slice(0, numPlanetsToPlace);\n\n        // Check that there is a minimum number of anomalies on the board\n        let blueTileRatio = 2;\n        let redTileRatio = 1;\n        // For 3, 4, and 6 player games, there is a different ratio\n        switch (this.state.currentNumberOfPlayers) {\n            case(3):\n                blueTileRatio = 3\n                redTileRatio = 1\n                break;\n            case(4):\n                blueTileRatio = 5\n                redTileRatio = 3\n                break;\n            case(6):\n                blueTileRatio = 3\n                redTileRatio = 2\n                break;\n            default:\n                break;\n        }\n        let numAnomaliesLeftToBePlaced = (numPlanetsToPlace / (blueTileRatio + redTileRatio)) * redTileRatio;\n\n        // If there is no anomalies to add, then we are done\n        if (numAnomaliesLeftToBePlaced < 0) {\n            return possibleTiles\n        }\n\n        // Still have to add a certain number of anomalies in. Get a list of possible anomalies we can add to the tile list\n        let allAnomalyList = this.props.useProphecyOfKings ? [...tileData.anomaly.concat(tileData.pokAnomaly)] : [...tileData.anomaly];\n\n        // Remove all current anomalies in use from this list\n        let possibleAnomalies = []\n        for (let anomalyIndex in allAnomalyList) {\n            if (possibleTiles.indexOf(allAnomalyList[anomalyIndex]) < 0) {\n                // Not using this anomaly yet, so we can add it\n                possibleAnomalies.push(allAnomalyList[anomalyIndex])\n            } else {\n                // Anomaly is already being used\n                numAnomaliesLeftToBePlaced -= 1;\n            }\n        }\n\n        // Randomize, so anomalies we are using are not always the same\n        possibleAnomalies = this.shuffle(possibleAnomalies, this.state.currentSeed);\n\n        return this.reverseReplace(possibleTiles, numAnomaliesLeftToBePlaced, possibleAnomalies, allAnomalyList, false)\n\n    }\n\n    /**\n     * Replace tiles starting from the lowest weight (bottom of the list being defined by reversPlacementOrder)\n     * @param possibleTiles {Int8Array} The ordered list of tiles, cut to the needed size\n     * @param numTilesToReplace {Number} The number of tiles we need to try to replace from replacement into possible\n     * @param replacementTiles {Int8Array} An array of all the tiles we can pick from to put into possibleTiles\n     * @param excludedTiles {Int8Array} An array of tiles we do not want to replace in possible\n     * @param reverseBeforeAndAfter {Boolean} Whether we want to reverse the list before and after replacement\n     * @returns {Int8Array} An ordered list of tiles, with some tiles being replaced\n     */\n    reverseReplace (possibleTiles, numTilesToReplace, replacementTiles, excludedTiles, reverseBeforeAndAfter) {\n        // If we aren't placing in reverse order, we want to start changing the worst tiles (which are usually last)\n        if (reverseBeforeAndAfter) {\n            possibleTiles = possibleTiles.reverse()\n        }\n        let currentTileIndex = possibleTiles.length - 1;\n\n        // While there are anomalies to place and a place to put them...\n        while (numTilesToReplace > 0 && replacementTiles.length > 0 && currentTileIndex > 0) {\n            // Check the index to see that it is not an anomaly or a 0 or -1 or 18 or hyperlane\n            let tileOfInterest = possibleTiles[currentTileIndex]\n            if (excludedTiles.indexOf(tileOfInterest) < 0 && tileOfInterest !== -1  && tileOfInterest !== 18 && tileOfInterest !== 0 && typeof tileOfInterest !== \"string\") {\n                // It is a replaceable tile, so fill it from the new anomalies list\n                possibleTiles[currentTileIndex] = replacementTiles.shift()\n                numTilesToReplace -= 1;\n            }\n            currentTileIndex -= 1;\n        }\n\n        // Undo the reverse from before\n        if (reverseBeforeAndAfter) {\n            possibleTiles = possibleTiles.reverse()\n        }\n\n        return possibleTiles\n    }\n\n    getPlanetIndexesToPlace(currentSeed) {\n        // Copy all the tile arrays from board data\n        let primary = [...boardData.styles[this.state.currentNumberOfPlayers.toString()][this.state.currentBoardStyle]['primary_tiles']]\n        let secondary = [...boardData.styles[this.state.currentNumberOfPlayers.toString()][this.state.currentBoardStyle]['secondary_tiles']]\n        let tertiary = [...boardData.styles[this.state.currentNumberOfPlayers.toString()][this.state.currentBoardStyle]['tertiary_tiles']]\n\n        // If shuffling, we need to shuffle primary, secondary, and tertiary indexes.\n        if (this.state.shuffleBoards) {\n            primary = this.shuffle(primary, currentSeed)\n            secondary = this.shuffle(secondary, currentSeed)\n            tertiary = this.shuffle(tertiary, currentSeed)\n        }\n\n        // Return this list of planet tiles to populate\n        if (this.state.reversePlacementOrder) {\n            return tertiary.concat(secondary).concat(primary)\n        } else {\n            return primary.concat(secondary).concat(tertiary)\n        }\n    }\n\n    getPossiblePlanets() {\n        // Get the list of planets to evaluate\n        let possiblePlanets = []\n        possiblePlanets = possiblePlanets.concat(tileData.blue).concat(tileData.red)\n        if (this.props.useProphecyOfKings) {\n            possiblePlanets = possiblePlanets.concat(tileData.pokBlue).concat(tileData.pokRed)\n        }\n\n        // Get the preset weighting format based on the current pick style\n        let weights = {};\n        switch (this.state.currentPickStyle) {\n            case \"random\":\n                possiblePlanets = this.shuffle(possiblePlanets, this.state.currentSeed)\n                return possiblePlanets\n            case \"custom\":\n                weights = {\n                    \"resource\": parseInt(this.state.resourceWeight),\n                    \"influence\": parseInt(this.state.influenceWeight),\n                    \"planet_count\": parseInt(this.state.planetCountWeight),\n                    \"specialty\": parseInt(this.state.specialtyWeight),\n                    \"anomaly\": parseInt(this.state.anomalyWeight),\n                    \"wormhole\": parseInt(this.state.wormholeWeight)\n                }\n                break;\n            case \"resource\":\n                weights = {\n                    \"resource\": 100,\n                    \"influence\": 10,\n                    \"planet_count\": 10,\n                    \"specialty\": 10,\n                    \"anomaly\": 10,\n                    \"wormhole\": 10\n                }\n                break;\n            case \"influence\":\n                weights = {\n                    \"resource\": 10,\n                    \"influence\": 100,\n                    \"planet_count\": 10,\n                    \"specialty\": 10,\n                    \"anomaly\": 10,\n                    \"wormhole\": 10\n                }\n                break;\n            case \"balanced\":\n            default:\n                if (this.props.useProphecyOfKings) {\n                    weights = {\n                        \"resource\": 80,\n                        \"influence\": 30,\n                        \"planet_count\": 15,\n                        \"specialty\": 50,\n                        \"anomaly\": 40,\n                        \"wormhole\": 25\n                    }\n                } else {\n                    weights = {\n                        \"resource\": 80,\n                        \"influence\": 30,\n                        \"planet_count\": 15,\n                        \"specialty\": 40,\n                        \"anomaly\": 30,\n                        \"wormhole\": 25\n                    }\n                }\n                break;\n        }\n\n        // Re-order the planets based on their weights\n        possiblePlanets = this.getWeightedPlanetList(possiblePlanets, weights)\n\n        return possiblePlanets\n    }\n\n    // TODO rename from planet to tile\n    getWeightedPlanetList(possiblePlanets, weights) {\n        // Generate an array of tuples where the first element is the plant's tile number and the second is its weight\n        let planetWeights = [];\n        for (let planetTileNumber in possiblePlanets) {\n            planetWeights.push([possiblePlanets[planetTileNumber], this.getWeight(possiblePlanets[planetTileNumber], weights)])\n        }\n\n        // Sort the returned list by weight, with higher weighted planets being first\n        planetWeights.sort(function(a, b) {\n            return b[1] - a[1];\n        })\n\n        // Do a little post process shuffling for roughly similar planets\n        let currentIndex = 0;\n        let currentHighValue = planetWeights[0][1];\n        let currentSetToShuffle = [];\n        let postPossiblePlanets = [];\n        while (currentIndex < planetWeights.length) {\n            let planetWeight = planetWeights[currentIndex];\n            // Something in this array, lets see if we add to it\n            if (planetWeight[1] >= (currentHighValue - this.state.shuffleThreshold)) {\n                // Add this item to the array to shuffle\n                currentSetToShuffle.push(planetWeight);\n            } else {\n                // We are now outside our shuffle range. So shuffle what we have, and add it to the post\n                currentSetToShuffle = this.shuffle(currentSetToShuffle, this.state.currentSeed)\n                postPossiblePlanets = postPossiblePlanets.concat(currentSetToShuffle)\n                currentSetToShuffle = [planetWeight]\n                currentHighValue = planetWeight[1]\n            }\n\n            currentIndex += 1;\n        }\n        currentSetToShuffle = this.shuffle(currentSetToShuffle, this.state.currentSeed)\n        postPossiblePlanets = postPossiblePlanets.concat(currentSetToShuffle)\n\n\n        // Convert from tuple down to just the tile number\n        let orderedPlanets = [];\n        for (let weightedPlanet in postPossiblePlanets) {\n            orderedPlanets.push(postPossiblePlanets[weightedPlanet][0]);\n        }\n\n        return orderedPlanets\n    }\n\n    getWeight(planetTileNumber, weights) {\n        let total_weight = 0\n        let tile = tileData.all[planetTileNumber.toString()]\n\n        // Go over all the planets in this tile and add up their values\n        for (let planetIndex in tile['planets']) {\n            let planet = tile['planets'][planetIndex]\n            total_weight += (planet['resources'] / 4) * weights['resource']\n            total_weight += (planet['influence'] / 4) * weights['influence']\n            total_weight += (weights['planet_count'] / 2)\n            total_weight += planet['specialty'] ? weights['specialty'] : 0\n        }\n\n        // Handle anomalies\n        if (tile['type'] === 'anomaly') {\n            total_weight += weights['anomaly'] + 40;\n            // Providing bonuses to these sections mean the other ones are never used\n            // if (tile['anomaly'] === null\n            //     || tile['anomaly'] === 'asteroid-field'\n            //     || tile['anomaly'] === 'gravity-rift') {\n            //     // Give an extra boost to these anomalies, as they are easier to cross than others\n            //     total_weight += 20;  // Change total back to 30 if using this\n            // }\n        }\n        total_weight += tile['wormhole'] ? weights['wormhole'] : 0\n\n        return total_weight\n    }\n    togglePickRacesHelp(event) {\n        this.setState({\n            pickRacesHelp: !this.state.pickRacesHelp\n        })\n    }\n    toggleBoardStyleHelp(event) {\n        this.setState({\n            boardStyleHelp: !this.state.boardStyleHelp\n        })\n    }\n    togglePickStyleHelp(event) {\n        this.setState({\n            pickStyleHelp: !this.state.pickStyleHelp\n        })\n    }\n    toggleSetPlayerNamesHelp(event) {\n        this.setState({\n            setPlayerNamesHelp: !this.state.setPlayerNamesHelp\n        })\n    }\n    toggleSetRacesHelp(event) {\n        this.setState({\n            setRacesHelp: !this.state.setRacesHelp\n        })\n    }\n    togglePickMultipleRacesHelp(event) {\n        this.setState({\n            pickMultipleRacesHelp: !this.state.pickMultipleRacesHelp\n        })\n    }\n    toggleShufflePriorityHelp(event) {\n        this.setState({\n            shufflePriorityHelp: !this.state.shufflePriorityHelp\n        })\n    }\n    toggleReversePlacementOrderHelp(event) {\n        this.setState({\n            reversePlacementOrderHelp: !this.state.reversePlacementOrderHelp\n        })\n    }\n\n    render() {\n        return (\n            <div id=\"options\" className={this.props.visible ? \"\" : \"d-none\"}>\n                <div className=\"title\">\n                    <h4 className=\"text-center\">Generation Options</h4>\n                </div>\n                <form id=\"generateForm\" onSubmit={this.generateBoard}>\n\n                    <div className=\"custom-control custom-checkbox mb-3\">\n                        <input type=\"checkbox\" className=\"custom-control-input\" id=\"pokExpansion\" name=\"useProphecyOfKings\" checked={this.props.useProphecyOfKings} onChange={this.updatePok} />\n                        <label className=\"custom-control-label\" htmlFor=\"pokExpansion\">Use Prophecy of Kings Expansion</label>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"playerCount\">Number of Players</label>\n                        <select className=\"form-control\" id=\"playerCount\" name=\"currentNumberOfPlayers\" value={this.state.currentNumberOfPlayers} onChange={this.updatePlayerCount}>\n                            {this.state.currentNumberOfPlayersOptions.map((x) => <option key={x} value={x}>{x}</option>)}\n                        </select>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"boardStyle\" className=\"d-flex\">Board Style\n                            <QuestionCircle className=\"icon\" onClick={this.toggleBoardStyleHelp} />\n                        </label>\n                        <select className=\"form-control\" id=\"boardStyle\" name=\"currentBoardStyle\" value={this.state.currentBoardStyle} onChange={this.updateBoardStyle}>\n                            {this.state.currentBoardStyleOptions.map((x) => <option key={x} value={x}>{this.capitalize(x)}</option>)}\n                        </select>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"pickStyle\" className=\"d-flex\">Picking Style\n                            <QuestionCircle className=\"icon\" onClick={this.togglePickStyleHelp} />\n                        </label>\n                        <select className=\"form-control\" id=\"pickStyle\" name=\"currentPickStyle\" value={this.state.currentPickStyle} onChange={this.handleInputChange}>\n                            {this.state.optionsPossible.pickStyles.map((x) => <option key={x} value={x}>{this.capitalize(x)}</option>)}\n                        </select>\n                    </div>\n                    <div className={\"ml-2 collapse \" + (this.state.currentPickStyle === \"custom\" ? \"show\" : \"\")} id=\"customPickStyle\">\n                        <div className=\"card card-body\">\n                            <label htmlFor=\"customResource\">Resource</label>\n                            <input type=\"range\" className=\"custom-range\" name=\"resourceWeight\" value={this.state.resourceWeight} onChange={this.handleInputChange} />\n\n                            <label htmlFor=\"customInfluence\">Influence</label>\n                            <input type=\"range\" className=\"custom-range\" name=\"influenceWeight\" value={this.state.influenceWeight} onChange={this.handleInputChange} />\n\n                            <label htmlFor=\"customPlanetCount\">Planet Count</label>\n                            <input type=\"range\" className=\"custom-range\" name=\"planetCountWeight\" value={this.state.planetCountWeight} onChange={this.handleInputChange} />\n\n                            <label htmlFor=\"customSpecialty\">Specialty</label>\n                            <input type=\"range\" className=\"custom-range\" name=\"specialtyWeight\" value={this.state.specialtyWeight} onChange={this.handleInputChange} />\n\n                            <label htmlFor=\"customAnomaly\">Anomaly</label>\n                            <input type=\"range\" className=\"custom-range\" name=\"anomalyWeight\" value={this.state.anomalyWeight} onChange={this.handleInputChange} />\n\n                            <label htmlFor=\"customWormhole\">Wormhole</label>\n                            <input type=\"range\" className=\"custom-range\" name=\"wormholeWeight\" value={this.state.wormholeWeight} onChange={this.handleInputChange} />\n                        </div>\n                    </div>\n\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"seed\">Specific Seed</label>\n                        <input className=\"form-control\" id=\"seed\" name=\"updateSeed\" type=\"text\" placeholder=\"Enter a number to seed generation...\" value={this.state.currentSeed} onChange={this.updateSeed} />\n                    </div>\n\n                    <div className=\"custom-control custom-checkbox mb-3 d-flex\">\n                        <input type=\"checkbox\" className=\"custom-control-input\" id=\"pickRaces\" name=\"pickRaces\" checked={this.state.pickRaces} onChange={this.handleInputChange} />\n                        <label className=\"custom-control-label\" htmlFor=\"pickRaces\">Pick Races for Players</label>\n                        <QuestionCircle className=\"icon\" onClick={this.togglePickRacesHelp} />\n                    </div>\n                    <div className={\"ml-2 collapse \" + (this.state.pickRaces ? \"show\" : \"\")} id=\"pickRacesCollapse\">\n                        <div className=\"card card-body\">\n                            <button type=\"button\" className=\"btn btn-outline-primary mb-2\" onClick={this.toggleSetPlayerNamesHelp}>Set Player Names</button>\n\n                            <button type=\"button\" className=\"btn btn-outline-primary mb-2\" onClick={this.toggleSetRacesHelp}>Set Included Races</button>\n\n                            {/*<div className=\"custom-control custom-checkbox d-flex\">*/}\n                            {/*    <input type=\"checkbox\" className=\"custom-control-input\" id=\"pickMultipleRaces\" name=\"pickMultipleRaces\" checked={this.state.pickMultipleRaces} onChange={this.handleInputChange} />*/}\n                            {/*    <label className=\"custom-control-label\" htmlFor=\"pickMultipleRaces\">Let Players Pick From Multiple</label>*/}\n                            {/*    <QuestionCircle className=\"icon\" onClick={this.togglePickMultipleRacesHelp} />*/}\n                            {/*</div>*/}\n                        </div>\n                    </div>\n\n                    <div className=\"custom-control custom-checkbox mb-3 d-flex\">\n                        <input type=\"checkbox\" className=\"custom-control-input\" id=\"shuffleBoards\" name=\"shuffleBoards\" checked={this.state.shuffleBoards} onChange={this.handleInputChange} />\n                        <label className=\"custom-control-label\" htmlFor=\"shuffleBoards\">Randomize Priorities Before Placement</label>\n                        <QuestionCircle className=\"icon\" onClick={this.toggleShufflePriorityHelp} />\n                    </div>\n\n                    <div className=\"custom-control custom-checkbox mb-3 d-flex\">\n                        <input type=\"checkbox\" className=\"custom-control-input\" id=\"reversePlacementOrder\" name=\"reversePlacementOrder\" checked={this.state.reversePlacementOrder} onChange={this.handleInputChange} />\n                        <label className=\"custom-control-label\" htmlFor=\"reversePlacementOrder\">Reverse Placement Order</label>\n                        <QuestionCircle className=\"icon\" onClick={this.toggleReversePlacementOrderHelp} />\n                    </div>\n\n                    <HelpModal key={\"help-pick\"} visible={this.state.pickStyleHelp} hideModal={this.togglePickStyleHelp} title={\"About Pick Style\"}\n                         content='<p>\n                         Pick Style is used to determine how tiles are weighted for when they are placed on the board. A higher weighted tile means that the hex is more important, and so (depending on the board style) it is put closer to home worlds to facilitate available assets.\n                         <br>\n                         <br><b>Balanced:</b> A custom weight which favors resources and planet count more than anomalies. This more accurately factors in tech specialties and influence as trade-offs to the \"Resource\" pick.\n                         <br><b>Resource:</b> Tiles are ordered primarily by their resource values. Higher resource planets are more coveted, and so are more important.\n                         <br><b>Influence:</b> Similar to \"Resource\", tiles are ordered primarily by their influence values.\n                         <br><b>Random:</b> Tiles are completely randomly ordered. Expect chaotic and unbalanced maps.\n                         <br><b>Custom:</b> Enter your own values in for balancing tradeoffs between various tile qualities.\n                         </p>'\n\n                    />\n                    <SetPlayerNameModal visible={this.state.setPlayerNamesHelp} currentPlayerNames={this.props.currentPlayerNames}\n                                        hideModal={this.toggleSetPlayerNamesHelp} handleNameChange={this.handleNameChange}\n                    />\n                    <SetRacesModal visible={this.state.setRacesHelp} races={this.state.optionsPossible.races}\n                                   pokRaces={this.state.optionsPossible.pokRaces} useProphecyOfKings={this.props.useProphecyOfKings}\n                                   currentRaces={this.props.currentRaces}\n                                   hideModal={this.toggleSetRacesHelp} handleRacesChange={this.handleRacesChange}\n                    />\n                    <HelpModal key={\"help-board\"} visible={this.state.boardStyleHelp} hideModal={this.toggleBoardStyleHelp} title={\"About Board Style\"}\n                         content='<p>\n                         Board style changes how the tiles are actually laid out on a newly generated map.\n                         <br>\n                         <br>\n                         Changing this would cause you to expect different hex layouts, such as different patterns of tiles, usage of hyperlanes, or unorthodox placement of home worlds.\n                         </p>'\n                    />\n                    <HelpModal key={\"help-races\"} visible={this.state.pickRacesHelp} hideModal={this.togglePickRacesHelp} title={\"About Picking Races\"}\n                         content=\"<p>\n                         Automatically assigns races to the players on the boards.\n                         <br>\n                         <br>\n                         From the set of races, turning this on will assign every player a random race (designated by assigning them the homeworld tile of that race). You should pick which player sits at a certain position before turning this on.\n                         </p>\"\n                    />\n                    <HelpModal key={\"help-multiple\"} visible={this.state.pickMultipleRacesHelp} hideModal={this.togglePickMultipleRacesHelp} title={\"About Picking Multiple Races\"}\n                         content=\"<p>\n                         Divides all the races evenly up amongst the players in the game (with no overflow), so that they can choose from a selection instead of being specifically assigned one race.\n                         <br>\n                         <br>\n                         Some groups prefer to have a draft, where every player is given a few races to pick between. This lets them pick the races that they want to play, but not have any conflicts with other players about playing a certain race.\n                         </p>\"\n                    />\n                    <HelpModal key={\"help-priority\"} visible={this.state.shufflePriorityHelp} hideModal={this.toggleShufflePriorityHelp} title={\"About Shuffling Priority\"}\n                         content='<p>\n                         Randomizes the priority picks for each picking round.\n                         <br>\n                         <br>\n                         Normally when placing tiles, this tool attempts to place the tiles so player 1 does not always get the best tiles. To do this, it gives player 1 first pick from the list of tiles weighted by picking style, player 2 second pick and so on for the first round of placing tiles. Once the last player has placed a tile, they then get to place another. The tiles are then placed in reverse order from there. So in a 6-player game, player 1 gets to place tile 1 and 12, while player 6 gets to place tile 6 and 7. This is a similar strategy to placing opening settlements in Settlers of Catan.\n                         <br>\n                         <br>\n                         Turning this on stops this from happening, and instead completely randomizes the placement order.\n                         </p>'\n                    />\n                    <HelpModal key={\"help-reverse\"} visible={this.state.reversePlacementOrderHelp} hideModal={this.toggleReversePlacementOrderHelp} title={\"About Reverse Placement Order\"}\n                         content='<p>\n                         Reverses which tiles are placed first in pick order.\n                         <br>\n                         <br>\n                         Tiles are normally placed in priority (see randomize priority help). This reverses the order, so that the last picks are first, which has the effect of pushing the morre valuable tiles towards the center of the galaxy.\n                         </p>'\n                    />\n            \n                    <button type=\"submit\" className=\"btn btn-primary\">Generate</button>\n                </form>\n            </div>\n        );\n    }\n}\nexport default MapOptions;","import React from 'react';\nimport $ from 'jquery';\nimport './App.css';\nimport BootstrapScripts from \"./helpers/BootstrapScripts\";\nimport MoreInfo from \"./panels/MoreInfo\";\nimport ExtraTiles from \"./panels/ExtraTiles\";\nimport MainOverview from \"./overview/MainOverview\";\nimport MainMap from \"./map/MainMap\";\nimport MapControls from \"./map/MapControls\";\nimport OptionsControls from \"./options/OptionsControls\";\nimport MapOptions from \"./options/MapOptions\";\nimport tileData from \"./data/tileData.json\";\nimport raceData from \"./data/raceData.json\";\nimport boardData from \"./data/boardData.json\";\nimport {calculateOffsets} from \"./helpers/Helpers\";\n\n/**\n * The core application page. Holds the states for common objects like tile data and player names. Responsible for\n * drawing the actual map.\n */\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        \n        this.state = {\n            isOptionsMenuShowing: true,\n            useProphecyOfKings: false,\n            overviewVisible: true,\n            extraTilesVisible: false,\n            moreInfoVisible: false,\n            backgroundAnimated: true,\n            tiles: [...boardData.blankMap],\n            overlayVisible: false,\n            zoom: 1.0,\n            mobileBreakpoint: 700,\n            isMobileView: false,\n            currentPlayerNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            currentRaces: [...raceData.races]\n        };\n    \n        this.drawMap = this.drawMap.bind(this);\n\n        this.onPopState = this.onPopState.bind(this);\n        this.checkResize = this.checkResize.bind(this);\n\n        this.updateTiles = this.updateTiles.bind(this);\n        this.validateTiles = this.validateTiles.bind(this);\n        this.toggleBackground = this.toggleBackground.bind(this);\n        this.removeTrailing = this.removeTrailing.bind(this);\n\n        this.toggleOptionsMenu = this.toggleOptionsMenu.bind(this);\n        this.toggleProphecyOfKings = this.toggleProphecyOfKings.bind(this);\n        this.toggleOverlay = this.toggleOverlay.bind(this);\n        this.toggleMoreInfo = this.toggleMoreInfo.bind(this);\n        this.toggleExtraTiles = this.toggleExtraTiles.bind(this);\n        this.copyTilesToClipboard = this.copyTilesToClipboard.bind(this);\n        this.showExtraTiles = this.showExtraTiles.bind(this);\n        this.zoomPlusClick = this.zoomPlusClick.bind(this);\n        this.zoomMinusClick = this.zoomMinusClick.bind(this);\n        \n        this.drag = this.drag.bind(this);\n        this.drop = this.drop.bind(this);\n        this.dragEnter = this.dragEnter.bind(this);\n        this.dragLeave = this.dragLeave.bind(this);\n        this.allowDrop = this.allowDrop.bind(this);\n\n    }\n    \n    /* URL CONTROLS */\n\n    /**\n     * After all elements on the html page have been created, run this.\n     */\n    componentDidMount() {\n        // Setup the main jquery selectors\n        // TODO move these or find a way to not use them\n        this.$mapContainer =  $(\"#mainContent\");\n        this.$tiMap = $(\"#map\");\n\n        // Grab the variables from the url on back/forward events\n        window.onpopstate = this.onPopState\n        this.onPopState();\n\n        // Change the map dimensions whenever the page size is different\n        window.onresize = this.checkResize\n        this.checkResize();\n    }\n\n    /**\n     * We are done with the page, removing everything.\n     */\n    componentWillUnmount() {\n        window.onpopstate = () => {};\n    }\n\n    /**\n     * When the window size is changed, update various components to be better looking on mobile vs desktop.\n     */\n    checkResize() {\n        if (window.innerWidth < this.state.mobileBreakpoint) {\n            if (!this.state.isMobileView) {\n                // Just transitioned into mobile state, so hide the options menu\n                this.setState({\n                    isMobileView: true,\n                    isOptionsMenuShowing: false,\n                })\n                document.documentElement.style.setProperty('--options-width', \"0px\");\n            } // else { // We went from mobile to mobile, don't need to do anything\n        } else {\n            // We are in desktop state\n            this.setState({\n                isMobileView: false,\n                isOptionsMenuShowing: true,\n            })\n            document.documentElement.style.setProperty('--options-width', \"400px\");\n        }\n\n        // Redraw with the new mobile conditions\n        this.drawMap()\n    }\n\n    /**\n     * Whenever we go back, grab the tiles from the url bar, and set them as the current tiles.\n     * @param {*} event The event that triggered this function.\n     */\n    onPopState(event) {\n        // Get the tiles from the url\n        let url = new URL(document.location);\n        let tiles = url.searchParams.get(\"tiles\");\n        \n        // Make sure the tiles parameter is set to something\n        const newTiles = tiles !== null ? this.validateTiles(tiles) : [];\n\n        // Update the tiles in the state, and redraw the map\n        if (newTiles !== []) {\n            this.setState({\n                tiles: newTiles,\n            }, this.drawMap );\n        }\n    };\n    \n    /* TILE CHANGING FUNCTIONS */\n\n    /**\n     * Updates the tiles state with a new set of tiles, and also pushes it to the url for sharable links\n     * @param {number[]} newTiles\n     */\n    updateTiles(newTiles) {\n        // Remove the unused tile numbers at the end of the array\n        newTiles = this.removeTrailing(newTiles);\n\n        // Add it to the url as a parameter\n        window.history.pushState({}, null, window.location.pathname + '?tiles=' + newTiles.toString());\n\n        // Hide the options menu when we are on mobile (for when the tiles update and the options menu is open)\n        let newOptionsMenuState = this.state.isOptionsMenuShowing\n        if (this.state.isMobileView) {\n            newOptionsMenuState = false;\n        }\n\n        this.setState({\n            tiles: newTiles,\n            isOptionsMenuShowing: newOptionsMenuState,\n        }, () => {\n            // Update the extra tiles menu, and draw a new map with the new tiles\n            this.showExtraTiles();\n            this.drawMap();\n        });\n    }\n\n    /**\n     * Removes any trailing -1s from a tile string.\n     * @param {number[]} tiles the tile string to clean\n     * @returns {number[]} the clean tile string\n     */\n    removeTrailing(tiles) {\n        while(tiles[tiles.length - 1] === -1){\n            tiles.pop();\n        }\n        return tiles;\n    }\n\n    /**\n     * Attempts to validate a given tile string, by cleaning it up and turning it into an object.\n     * @returns {number[]} An array of numbers representing tiles.\n     */\n    validateTiles(tiles) {\n        // Remove any spaces\n        tiles = tiles.replaceAll(\" \", \"\");\n        \n        // Check if it has opening and closing brackets. If so, remove them\n        if (tiles.charAt(0) === \"[\") {\n            tiles = tiles.substring(1, tiles.length);\n        }\n        if (tiles.charAt(tiles.length - 1) === \"]\") {\n            tiles = tiles.substring(0, tiles.length-1);\n        }\n        \n        // Now split on commas\n        tiles = tiles.split(',');\n        let newTiles = [];\n        for (let tileIndex in tiles) {\n            let parsed = Number(tiles[tileIndex]);\n            // If tile is a string (like a hyperlane), add it. Otherwise add it as a number\n            newTiles.push(isNaN(parsed) ? tiles[tileIndex] : parsed);\n        }\n        return newTiles;\n    }\n    \n    /* BUTTON ACTIONS */\n\n    /**\n     * Toggle the visibility of the options menu for both desktop and mobile clients.\n     */\n    toggleOptionsMenu() {\n        // Set the css variable for options width (for desktop only)\n        if (window.innerWidth >= this.state.mobileBreakpoint) {\n            let optionsSize = this.state.isOptionsMenuShowing ? \"0px\" : \"400px\";\n            document.documentElement.style.setProperty('--options-width', optionsSize);\n        }\n        \n        // Update the map so that it correctly uses the new width\n        this.drawMap();\n        \n        // Update the state to the new view\n        this.setState({\n            isOptionsMenuShowing: !this.state.isOptionsMenuShowing,\n        });\n    }\n\n    /**\n     * Toggle the system number overlay.\n     */\n    toggleOverlay() {\n        this.setState({\n            overlayVisible: !this.state.overlayVisible,\n        }, this.drawMap );\n    }\n\n    /**\n     * Toggle whether we need to use the prophecy of kings expansion or not\n     */\n    toggleProphecyOfKings() {\n        this.setState({\n            useProphecyOfKings: !this.state.useProphecyOfKings,\n        }, this.showExtraTiles);\n    }\n\n    /**\n     * Toggle whether the more info side panel is visible. If the extra tiles panel had just been triggered, we just\n     * need to hide the more info panel.\n     * @param {*} event The event that triggered this function.\n     * @param {boolean} justTriggeredTiles Whether or not the extra tiles panel had just been opened.\n     */\n    toggleMoreInfo(event, justTriggeredTiles) {\n        // Guarantee that justTriggeredTiles is set\n        justTriggeredTiles = justTriggeredTiles === undefined ? false : justTriggeredTiles;\n\n        let optionsSize = this.state.moreInfoVisible ? \"0px\" : \"400px\";\n        document.documentElement.style.setProperty('--more-info-width', optionsSize);\n\n        this.setState({\n            moreInfoVisible: !this.state.moreInfoVisible,\n        }, () => {\n            // Hide the extra tiles if the user just pressed the show more info button\n            if (this.state.extraTilesVisible && !justTriggeredTiles) {\n                this.toggleExtraTiles(event, true);\n            }\n        });\n    }\n\n    /**\n     * Toggle whether the extra tiles side panel is visible.\n     * @param {*} event The event that triggered this function.\n     * @param {boolean} justTriggeredInfo Whether or not the more info panel had just been opened.\n     */\n    toggleExtraTiles(event, justTriggeredInfo) {\n        justTriggeredInfo = justTriggeredInfo === undefined ? false : justTriggeredInfo;\n\n        // Update what tiles are going to be displayed\n        this.showExtraTiles();\n\n        let optionsSize = this.state.extraTilesVisible ? \"0px\" : \"250px\";\n        document.documentElement.style.setProperty('--extra-tiles-width', optionsSize);\n\n        this.setState({\n            extraTilesVisible: !this.state.extraTilesVisible,\n        }, () => {\n            if (this.state.moreInfoVisible && !justTriggeredInfo) {\n                this.toggleMoreInfo(event, true);\n            }\n        });\n    }\n\n    /**\n     * Update what tiles are visible in the extra tiles panel based on the current tiles being used on the map\n     */\n    showExtraTiles() {\n        let systemNumbers = []\n        systemNumbers = systemNumbers.concat(tileData.blue).concat(tileData.red);\n        if (this.state.useProphecyOfKings) {\n            systemNumbers = systemNumbers.concat(tileData.pokBlue).concat(tileData.pokRed);\n        }\n\n        for (let systemNumber of systemNumbers) {\n            // If it is not on the map, show the system tile. Otherwise, hide it.\n            let systemSelector = $(\"#extra-\" + systemNumber);\n            !this.state.tiles.includes(systemNumber) ? systemSelector.show() : systemSelector.hide();\n        }\n    }\n\n    /**\n     * Using writeText, copy the tiles currently being displayed to the user's clipboard.\n     */\n    copyTilesToClipboard() {\n        // Get the current tiles\n        let tileString = [...this.state.tiles];\n        tileString = this.removeTrailing(tileString);\n\n        // Remove mecatol rex\n        tileString.shift();\n\n        // Remove the -1s and replace them with zeros, then remove the commas\n        tileString = tileString.toString();\n        tileString = tileString.replaceAll(\"-1\", \"0\");\n        tileString = tileString.replaceAll(\",\", \" \");\n\n        // Print to console in case the copy function doesnt actually work\n        console.log(\"Here is your tile string for use with this TTS Mod (https://steamcommunity.com/sharedfiles/filedetails/?id=1466689117):\");\n        console.log(tileString);\n\n        // Copy to the user's clipboard\n        navigator.clipboard.writeText(tileString);\n    }\n\n    /**\n     * Toggle the background animation, from moving stars to static, and visa versa\n     */\n    toggleBackground() {\n        if (!this.state.backgroundAnimated) {\n            $(\"#stars\").css(\"animation\", \"animateStar 50s linear infinite\");\n            $(\"#stars2\").css(\"animation\", \"animateStar 100s linear infinite\");\n            $(\"#stars3\").css(\"animation\", \"animateStar 150s linear infinite\");\n        } else {\n            $(\"#stars\").css(\"animation\", \"staticStar 50s linear infinite\");\n            $(\"#stars2\").css(\"animation\", \"staticStar 100s linear infinite\");\n            $(\"#stars3\").css(\"animation\", \"staticStar 150s linear infinite\");\n        }\n        this.setState({\n            backgroundAnimated: !this.state.backgroundAnimated,\n        });\n    }\n\n    /**\n     * Zoom the map in by a set amount, up until it is the same size as the original images. Then redraw the map.\n     */\n    zoomPlusClick() {\n        if (this.state.zoom < 3) {\n            this.setState({\n                zoom: this.state.zoom + 0.75,\n            }, this.drawMap );\n        }\n    }\n\n    /**\n     * Zoom the map out by a set amount, up until it is too small to see. Then redraw the map.\n     */\n    zoomMinusClick() {\n        if (this.state.zoom > 0.5) {\n            this.setState({\n                zoom: this.state.zoom - 0.75,\n            }, this.drawMap );\n        }\n    }\n\n    /* MAP GENERATION */\n\n    /**\n     * The main rendering function for the map. Using the tile string, cleanly lays out a map that is centered in the\n     * map div.\n     */\n    drawMap() {\n        // Check to see if there are any tiles to render currently\n        if (this.state === undefined || this.state.tiles.length <= 0) {\n            this.setState({\n                overviewVisible: true,\n                mapVisible: false,\n                mapControlsVisible: false,\n            });\n            return;\n        } else {\n            this.setState({\n                overviewVisible: false,\n                mapVisible: true,\n                mapControlsVisible: true,\n            });\n        }\n\n        // Set the map height based on which tiles are being used\n        let mapNumberTilesHeight = 1; // Every standard TI board is 7 tiles tall\n        let mapNumberTilesWidth = 1; // Every standard TI board is 5.5 tiles wide\n        if (this.state.tiles[37] >= 0 || this.state.tiles[38] >= 0 || this.state.tiles[60] >= 0\n            || this.state.tiles[48] >= 0 || this.state.tiles[49] >= 0 || this.state.tiles[50] >= 0) {\n            mapNumberTilesHeight = 9;\n            mapNumberTilesWidth = 7;\n        } else if (this.state.tiles[19] >= 0 || this.state.tiles[20] >= 0 || this.state.tiles[36] >= 0\n            || this.state.tiles[27] >= 0 || this.state.tiles[28] >= 0 || this.state.tiles[29] >= 0) {\n            mapNumberTilesHeight = 7;\n            mapNumberTilesWidth = 5.5;\n        } else if (this.state.tiles[7] >= 0 || this.state.tiles[8] >= 0 || this.state.tiles[18] >= 0\n            || this.state.tiles[12] >= 0 || this.state.tiles[13] >= 0 || this.state.tiles[14] >= 0) {\n            mapNumberTilesHeight = 5;\n            mapNumberTilesWidth = 4;\n        } else if (this.state.tiles[1] >= 0 || this.state.tiles[2] >= 0 || this.state.tiles[6] >= 0\n            || this.state.tiles[3] >= 0 || this.state.tiles[4] >= 0 || this.state.tiles[5] >= 0) {\n            mapNumberTilesHeight = 3;\n            mapNumberTilesWidth = 2.5;\n        }\n\n        // Configuration options for magic numbers\n        let mapPadding = 0; // The amount of pad spacing to apply to the map edges\n        let mapTileWidth = 364; // The width of every tile in the static folder\n        let mapTileHeight = 317;\n\n        // Get extra information about the map\n        let mapWidth = this.$mapContainer.width() - (2 * mapPadding); // Put padding on top/bottom of map\n        let mapHeight = this.$mapContainer.height() - (2 * mapPadding); // Put padding on either side of map\n        let tileWidth = Math.floor(mapWidth / mapNumberTilesWidth)\n        let tileHeight = Math.floor(mapHeight / mapNumberTilesHeight)\n\n        // Determine which will be our constraining factor, width or height?\n        let constraintWidth = Math.min(this.state.zoom * Math.min(tileWidth, Math.floor((mapTileWidth / mapTileHeight) * tileHeight)), mapTileWidth) // Prohibit over-zooming\n        let constraintHeight = Math.floor((mapTileHeight / mapTileWidth) * constraintWidth)\n\n        // Configure the map container to be this size\n        this.$tiMap.css(\"width\", constraintWidth * mapNumberTilesWidth)\n            .css(\"height\", constraintHeight * mapNumberTilesHeight);\n\n        // Calculate the offset values for margin left and margin top per tile\n        let offsets = calculateOffsets(constraintWidth, constraintHeight)\n\n        // Loop over tiles to assign various values to them\n        let currentPlayerNumber = 0;\n        for (let tileNumber = 0; tileNumber < offsets.length; tileNumber++) {\n            let tile = $(\"#tile-\" + tileNumber);\n            let numOverlay = $(\"#number-\" + tileNumber);\n            let underlay = $(\"#underlay-\" + tileNumber);\n            if (this.state.tiles[tileNumber] >= 0 || typeof this.state.tiles[tileNumber] === \"string\") {\n                tile.attr(\"width\", constraintWidth)\n                    .attr(\"height\", constraintHeight)\n                    .css(\"margin-left\", offsets[tileNumber][0])\n                    .css(\"margin-top\", offsets[tileNumber][1])\n                    .css(\"left\", (mapNumberTilesWidth / 2) * constraintWidth)\n                    .css(\"top\", (mapNumberTilesHeight / 2) * constraintHeight)\n                    .css({'transform' : 'rotate(0)'})  // Reset any rotations from other hyperlanes\n\n                tile.show();\n\n                if (typeof this.state.tiles[tileNumber] === \"string\") {\n                    // Hyperlane, so remove the last section and check if it needs to be rotated\n                    if (this.state.tiles[tileNumber].split(\"-\")[1] !== \"0\") {\n                        let degrees = 60 * Number(this.state.tiles[tileNumber].split(\"-\")[1]);\n                        tile.css({'transform' : 'rotate(-'+ degrees +'deg)'});\n                    }\n                }\n            } else {\n                tile.hide();\n            }\n\n            numOverlay.css(\"width\", constraintWidth)\n                .css(\"height\", constraintHeight)\n                .css(\"line-height\", constraintHeight + \"px\")\n                .css(\"margin-left\", offsets[tileNumber][0])\n                .css(\"margin-top\", offsets[tileNumber][1])\n                .css(\"left\", (mapNumberTilesWidth / 2) * constraintWidth)\n                .css(\"top\", (mapNumberTilesHeight / 2) * constraintHeight)\n                .css(\"display\", \"none\")\n                // .html(tileNumber)\n\n            if (typeof this.state.tiles[tileNumber] === \"string\") {\n                numOverlay.html(this.state.tiles[tileNumber].split(\"-\")[0])\n            } else {\n                numOverlay.html(this.state.tiles[tileNumber])\n            }\n\n            underlay.css(\"width\", constraintWidth + 6)\n                .css(\"height\", constraintHeight + 6)\n                .css(\"margin-left\", offsets[tileNumber][0]-3)\n                .css(\"margin-top\", offsets[tileNumber][1]-3)\n                .css(\"left\", (mapNumberTilesWidth / 2) * constraintWidth)\n                .css(\"top\", (mapNumberTilesHeight / 2) * constraintHeight)\n\n            if (!this.state.overlayVisible) {\n                numOverlay.hide()\n            } else {\n                if (this.state.tiles[tileNumber] === 0) {\n                    // Show the player name\n                    let name = this.state.currentPlayerNames[currentPlayerNumber];\n                    numOverlay.html(name === \"\" ? \"P\" + (currentPlayerNumber + 1) : name);\n                    currentPlayerNumber += 1;\n                }\n\n                if (this.state.tiles[tileNumber] !== -1) {\n                    numOverlay.show();\n                }\n            }\n        }\n\n        // Clear any css classes on the map\n        this.$tiMap.removeClass(\"center-map\");\n        this.$tiMap.removeClass(\"center-map-vertical\");\n        this.$tiMap.removeClass(\"center-map-horizontal\");\n\n        // Check to see if we are zoomed, or map is always screen size.\n        if (this.state.zoom > 1.0) {\n            // Check to see if we should still be horizontally or vertically centered\n            if ((constraintWidth * mapNumberTilesWidth) < mapWidth) {\n                this.$tiMap.addClass(\"center-map-horizontal\");\n            } else if ((constraintHeight * mapNumberTilesHeight) < mapHeight) {\n                this.$tiMap.addClass(\"center-map-vertical\");\n            } else {\n                // Use default map values\n            }\n\n            // TODO find what the mouse is hovering nearest to, or over. Get that element, and zoom in. Something like\n            //  this? https://stackoverflow.com/questions/6519043/get-mouse-position-on-scroll\n\n            // Center Mecatol Rex on the screen\n            $(\"#tile-0\").get(0).scrollIntoView({behavior: \"smooth\", block:\"center\", inline: \"center\"});\n        } else {\n            // No need to move the map around, just center it on the screen\n            this.$tiMap.addClass(\"center-map\");\n        }\n    }\n\n    /* DRAG AND DROP FUNCTIONS, modified from https://www.w3schools.com/html/html5_draganddrop.asp */\n\n    allowDrop(ev) {\n        ev.preventDefault();\n    }\n    dragEnter(ev){\n        let targetSelector = $(\"#\" + ev.target.id);\n        let targetUnderlay = $(\"#underlay-\" + ev.target.id.split(\"-\")[1]);\n        targetSelector.addClass(\"tile-target\")\n        targetUnderlay.addClass(\"underlay-target\")\n    }\n    dragLeave(ev){\n        let targetSelector = $(\"#\" + ev.target.id);\n        let targetUnderlay = $(\"#underlay-\" + ev.target.id.split(\"-\")[1]);\n        targetSelector.removeClass(\"tile-target\")\n        targetUnderlay.removeClass(\"underlay-target\")\n    }\n    drag(ev) {\n        ev.dataTransfer.setData(\"text\", ev.target.id);\n    }\n    drop(ev) {\n        ev.preventDefault();\n        // Get the associated ids\n        let fromId = ev.dataTransfer.getData(\"text\");\n        let targetId = ev.target.id;\n        \n        let targetSelector = $(\"#\" + targetId);\n        let fromSelector = $(\"#\" + fromId);\n        let targetUnderlay = $(\"#underlay-\" + ev.target.id.split(\"-\")[1]);\n        \n        // Temporarily store the target's source, and swap\n        let targetSource = targetSelector.attr('src');\n        targetSelector.attr('src', fromSelector.attr('src'));\n        fromSelector.attr('src', targetSource);\n        \n        let targetType = targetId.split(\"-\")[0];\n        let fromType = fromId.split(\"-\")[0];\n        let targetSecond = targetId.split(\"-\")[1];\n        let fromSecond = fromId.split(\"-\")[1];\n    \n        let tilesCopy = [...this.state.tiles];\n        if (fromType === \"tile\" && targetType === \"tile\") {\n            // Both are on the main map, so simply swap their positions in the tile array\n            let temp = tilesCopy[targetSecond];\n            tilesCopy[targetSecond] = tilesCopy[fromSecond];\n            tilesCopy[fromSecond] = temp;\n        } else if (fromType === \"extra\" && targetType === \"tile\") {\n            // Moving from the extra tiles onto the main map\n            let temp = tilesCopy[targetSecond];\n            tilesCopy[targetSecond] = parseInt(fromSecond);\n            // Update the id of the tile\n            fromSelector.attr('id', 'extra-' + temp)\n        } else if (fromType === \"tile\" && targetType === \"extra\") {\n            // Moving from the main map to the tiles\n            let temp = tilesCopy[fromSecond];\n            tilesCopy[fromSecond] = parseInt(targetSecond);\n            // Update the id of the tile\n            targetSelector.attr('id', 'extra-' + temp)\n        } else {\n            // Swapping extra tiles... Just update the ids\n            targetSelector.attr('id', 'extra-' + fromSecond)\n            fromSelector.attr('id', 'extra-' + targetSecond)\n        }\n        \n        // Clear the target classes\n        targetSelector.removeClass(\"tile-target\");\n        targetUnderlay.removeClass(\"underlay-target\");\n        \n        // Update the tile string\n        this.updateTiles(tilesCopy);\n    }\n    \n\n    render() {\n        return (\n            <div>\n                <OptionsControls visible={this.state.isOptionsMenuShowing} isMobileView={this.state.isMobileView}\n                                 toggleOptions={this.toggleOptionsMenu}\n                />\n\n                <MapControls visible={this.state.mapControlsVisible} extraTilesVisible={this.state.extraTilesVisible}\n                             moreInfoVisible={this.state.moreInfoVisible} overlayVisible={this.state.overlayVisible}\n\n                             toggleOverlay={this.toggleOverlay} copyTilesToClipboard={this.copyTilesToClipboard}\n                             toggleMoreInfo={this.toggleMoreInfo} toggleExtraTiles={this.toggleExtraTiles}\n                             zoomPlus={this.zoomPlusClick} zoomMinus={this.zoomMinusClick}\n                             toggleBackground={this.toggleBackground}\n                />\n                \n                <div id=\"mainContent\" className=\"justify-content-center align-items-center\">\n                    <MainOverview visible={this.state.overviewVisible}\n                    />\n                    \n                    <MainMap visible={this.state.mapVisible} overlayVisible={this.state.overlayVisible}\n                             tiles={this.state.tiles} useProphecyOfKings={this.state.useProphecyOfKings}\n\n                             drag={this.drag} drop={this.drop} dragEnter={this.dragEnter} dragLeave={this.dragLeave} allowDrop={this.allowDrop}\n                    />\n                </div>\n                \n                <ExtraTiles visible={this.state.extraTilesVisible} overlayVisible={this.state.overlayVisible}\n                            useProphecyOfKings={this.state.useProphecyOfKings}\n                            updateTiles={this.updateTiles}\n\n                            drag={this.drag} drop={this.drop} dragEnter={this.dragEnter} dragLeave={this.dragLeave} allowDrop={this.allowDrop}\n                />\n                \n                <MoreInfo visible={this.state.moreInfoVisible} currentPlayerNames={this.state.currentPlayerNames}\n                          useProphecyOfKings={this.state.useProphecyOfKings} tiles={this.state.tiles}\n                />\n                \n                <MapOptions visible={this.state.isOptionsMenuShowing} useProphecyOfKings={this.state.useProphecyOfKings}\n                            currentPlayerNames={this.state.currentPlayerNames} currentRaces={this.state.currentRaces}\n\n                            toggleProphecyOfKings={this.toggleProphecyOfKings} updateTiles={this.updateTiles}\n                            showExtraTiles={this.showExtraTiles}\n                />\n            \n                <BootstrapScripts />\n            </div>\n        );\n    }\n}\nexport default App;\n","/**\n * Calculate offsets of the tiles in relation to Mecatol Rex (the center tile). This information\n * is stored in an array of two value arrays. The two value arrays reperesent the margin left\n * and margin right to offset the tile (based on size of of tiles).\n * @param width The width (in pixels) of a single tile\n * @param height The height (in pixels) of a single tile\n * @returns {(number[]|(number)[])[]} an array of two value arrays.\n */\nexport const calculateOffsets = (width, height) => {\n    let leftWidth = -width\n    let topHeight = -height\n    let halfWidth = Math.ceil(leftWidth * 0.5)\n    let halfHeight = Math.ceil(topHeight * 0.5)\n    let treQuarWidth = Math.ceil(leftWidth * 0.75)\n\n    return [\n        [halfWidth, halfHeight],  // Mecatol Rex\n        // Inner ring\n        [halfWidth, halfHeight + topHeight],\n        [halfWidth - treQuarWidth, halfHeight + halfHeight],\n        [halfWidth - treQuarWidth, 0],\n        [halfWidth, halfHeight - topHeight],\n        [halfWidth + treQuarWidth, 0],\n        [halfWidth + treQuarWidth, halfHeight + halfHeight],\n        // Middle ring\n        [halfWidth, halfHeight + topHeight + topHeight],\n        [halfWidth - treQuarWidth, halfHeight + topHeight + halfHeight],\n        [halfWidth - leftWidth - halfWidth, halfHeight + topHeight],\n        [halfWidth - leftWidth - halfWidth, halfHeight],\n        [halfWidth - leftWidth - halfWidth, halfHeight - topHeight],\n        [halfWidth - treQuarWidth, halfHeight - topHeight - halfHeight],\n        [halfWidth, halfHeight - topHeight - topHeight],\n        [halfWidth + treQuarWidth, halfHeight - topHeight - halfHeight],\n        [halfWidth + leftWidth + halfWidth, halfHeight - topHeight],\n        [halfWidth + leftWidth + halfWidth, halfHeight],\n        [halfWidth + leftWidth + halfWidth, halfHeight + topHeight],\n        [halfWidth + treQuarWidth, halfHeight + topHeight + halfHeight],\n        // Outer Ring\n        [halfWidth, halfHeight + topHeight + topHeight + topHeight],\n        [halfWidth - treQuarWidth, halfHeight + topHeight + topHeight + halfHeight],\n        [halfWidth - leftWidth - halfWidth, halfHeight + topHeight + topHeight],\n        [halfWidth - treQuarWidth - leftWidth - halfWidth, halfHeight + topHeight + halfHeight],\n        [halfWidth - treQuarWidth - leftWidth - halfWidth, halfHeight + halfHeight],\n        [halfWidth - treQuarWidth - leftWidth - halfWidth, halfHeight - halfHeight],\n        [halfWidth - treQuarWidth - leftWidth - halfWidth, halfHeight - topHeight - halfHeight],\n        [halfWidth - leftWidth - halfWidth, halfHeight - topHeight - topHeight],\n        [halfWidth - treQuarWidth, halfHeight - topHeight - topHeight - halfHeight],\n        [halfWidth, halfHeight - topHeight - topHeight - topHeight],\n        [halfWidth + treQuarWidth, halfHeight - topHeight - topHeight - halfHeight],\n        [halfWidth + leftWidth + halfWidth, halfHeight - topHeight - topHeight],\n        [halfWidth + treQuarWidth + leftWidth + halfWidth, halfHeight - topHeight - halfHeight],\n        [halfWidth + treQuarWidth + leftWidth + halfWidth, halfHeight - halfHeight],\n        [halfWidth + treQuarWidth + leftWidth + halfWidth, halfHeight + halfHeight],\n        [halfWidth + treQuarWidth + leftWidth + halfWidth, halfHeight + topHeight + halfHeight],\n        [halfWidth + leftWidth + halfWidth, halfHeight + topHeight + topHeight],\n        [halfWidth + treQuarWidth, halfHeight + topHeight + topHeight + halfHeight],\n        // Extended Ring\n        [halfWidth, halfHeight + topHeight + topHeight + topHeight + topHeight],\n        [halfWidth - treQuarWidth, halfHeight + topHeight + topHeight + topHeight + halfHeight],\n        [halfWidth - leftWidth - halfWidth, halfHeight + topHeight + topHeight + topHeight],\n        [halfWidth - treQuarWidth - leftWidth - halfWidth, halfHeight + topHeight + topHeight + halfHeight],\n        [halfWidth - leftWidth - leftWidth - leftWidth, halfHeight + topHeight + topHeight],\n        [halfWidth - leftWidth - leftWidth - leftWidth, halfHeight + topHeight],\n        [halfWidth - leftWidth - leftWidth - leftWidth, halfHeight],\n        [halfWidth - leftWidth - leftWidth - leftWidth, halfHeight - topHeight],\n        [halfWidth - leftWidth - leftWidth - leftWidth, halfHeight - topHeight - topHeight],\n        [halfWidth - treQuarWidth - leftWidth - halfWidth, halfHeight - topHeight - topHeight - halfHeight],\n        [halfWidth - leftWidth - halfWidth, halfHeight - topHeight - topHeight - topHeight],\n        [halfWidth - treQuarWidth, halfHeight - topHeight - topHeight - topHeight - halfHeight],\n        [halfWidth, halfHeight - topHeight - topHeight - topHeight - topHeight],\n        [halfWidth + treQuarWidth, halfHeight - topHeight - topHeight - topHeight - halfHeight],\n        [halfWidth + leftWidth + halfWidth, halfHeight - topHeight - topHeight - topHeight],\n        [halfWidth + treQuarWidth + leftWidth + halfWidth, halfHeight - topHeight - topHeight - halfHeight],\n        [halfWidth + leftWidth + leftWidth + leftWidth, halfHeight - topHeight - topHeight],\n        [halfWidth + leftWidth + leftWidth + leftWidth, halfHeight - topHeight],\n        [halfWidth + leftWidth + leftWidth + leftWidth, halfHeight],\n        [halfWidth + leftWidth + leftWidth + leftWidth, halfHeight + topHeight],\n        [halfWidth + leftWidth + leftWidth + leftWidth, halfHeight + topHeight + topHeight],\n        [halfWidth + treQuarWidth + leftWidth + halfWidth, halfHeight + topHeight + topHeight + halfHeight],\n        [halfWidth + leftWidth + halfWidth, halfHeight + topHeight + topHeight + topHeight],\n        [halfWidth + treQuarWidth, halfHeight + topHeight + topHeight + topHeight + halfHeight],\n    ]\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}